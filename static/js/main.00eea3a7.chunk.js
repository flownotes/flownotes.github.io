(this.webpackJsonpflownotes=this.webpackJsonpflownotes||[]).push([[0],{147:function(e,t,n){},157:function(e,t,n){},159:function(e,t,n){},161:function(e,t,n){},172:function(e,t,n){},173:function(e,t,n){"use strict";n.r(t);var i=n(0),c=n.n(i),s=n(31),a=n.n(s),r=(n(146),n(51)),o=n(30),l=n(12),d=n(13),u=n(15),h=n(14),j=n(178),p=n(39),g=n(184),b=(n(147),n(1)),f=j.a.Search;function v(){return Object(b.jsx)("div",{className:"home-shell",children:Object(b.jsxs)("div",{className:"home-content",children:[Object(b.jsx)(m,{}),Object(b.jsx)(x,{}),Object(b.jsx)("p",{className:"or-seperator",children:"OR"}),Object(b.jsx)(y,{})]})})}function m(){return Object(b.jsxs)("div",{className:"logo-panel",children:[Object(b.jsx)("h1",{children:"FlowNotes"}),Object(b.jsx)("img",{src:"/logo192.png",alt:"FlowNotes Logo"})]})}var O=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var i;return Object(l.a)(this,n),(i=t.call(this,e)).onSearch=function(e){if(""!==e){var t=i.getVideoId(e);""===t?i.setState({error:!0}):i.props.history.push("/video/".concat(t))}},i.state={error:!1},i.inputRef=null,i}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.inputRef.focus({cursor:"end"})}},{key:"getVideoId",value:function(e){e.startsWith("http")||(e="https://"+e,console.log(e));var t="";try{t=new URL(e)}catch(n){return console.log(n),""}return"www.youtube.com"!=t.host&&"youtube.com"!=t.host||"/watch"!=t.pathname?"":t.searchParams.get("v")}},{key:"render",value:function(){var e=this,t=Object(b.jsx)("p",{className:"err-msg",children:"Please ensure that the URL is formatted correctly!"});return Object(b.jsxs)("div",{className:"video-link-form",children:[Object(b.jsx)("h2",{children:"Video Link"}),Object(b.jsx)("p",{children:"To start or continue taking notes on a video."}),Object(b.jsx)(f,{placeholder:"Enter video link",ref:function(t){return e.inputRef=t},allowClear:!0,enterButton:Object(b.jsx)(g.a,{}),onSearch:this.onSearch}),this.state.error?t:null]})}}]),n}(c.a.Component),x=Object(o.i)(O);function y(){var e=Object(b.jsx)(g.a,{style:{display:"flex",fontSize:"22px"}}),t=Object(o.g)();return Object(b.jsxs)("div",{className:"notes-link",children:[Object(b.jsxs)(p.a,{type:"primary",size:"large",shape:"round",style:{display:"flex",alignItems:"center"},onClick:function(e){t.push("/notes")},children:["Notes Manager ",e]}),Object(b.jsx)("p",{children:"To view your previous notes"})]})}function N(e){var t=e.onClick,n=e.style||{};return n=Object.assign({height:"100px",background:"#1f1f1f",borderRadius:"20%",padding:"7px",cursor:"pointer"},n),Object(b.jsx)("img",{className:"logo",src:"/logo192.png",alt:"FlowNotes Logo",style:n,onClick:t})}var C=n(182),S=n(137),k=n(180),D=n(175),w=n(121),I=n(185),T=n(186),E=n(187),M=[{id:"nid1",timestamp:190,content:"Test content",tags:["git","html","vcs"]},{id:"nid2",timestamp:255,content:"Test content",tags:["exam","logistics"]},{id:"nid3",timestamp:441,content:"Test content",tags:["web","animation","git"]},{id:"nid4",timestamp:590,content:"Test content",tags:["css","js","design"]},{id:"nid5",timestamp:681,content:"Test content",tags:["exam"]},{id:"nid6",timestamp:1220,content:"Test content",tags:["web","html","js"]},{id:"nid7",timestamp:1554,content:"Test content",tags:["design","web","exam"]}],A=[{id:"90QvQ3p6brk",title:"L15 - Web animation in practice",length:48,notes:JSON.parse(JSON.stringify(M)),image:"/thumbnails/th1.jpg"},{id:"LzELw8k1FEY",title:"L14 - CSS and easing functions",length:51,notes:JSON.parse(JSON.stringify(M)),image:"/thumbnails/th2.jpg"},{id:"eRcAf69IdCk",title:"L13 - Understading CSS animations",length:48,notes:JSON.parse(JSON.stringify(M)),image:"/thumbnails/th3.jpg"},{id:"TVpGb5Jj0GY",title:"L12 - JS vs CSS animation",length:56,notes:JSON.parse(JSON.stringify(M)),image:"/thumbnails/th4.jpg"},{id:"kzvt3g8pUHQ",title:"L11 - Animation to convey context",length:43,notes:JSON.parse(JSON.stringify(M)),image:"/thumbnails/th5.jpg"},{id:"4NKaIclN2fk",title:"L10 - Intro to animation on the web",length:58,notes:JSON.parse(JSON.stringify(M)),image:"/thumbnails/th6.jpg"}],L={cid1:{code:"CSE 110",name:"Web design",active:!0,videos:JSON.parse(JSON.stringify(A))},cid2:{code:"CSE 141",name:"Introduction to Computer Architecture",active:!0,videos:JSON.parse(JSON.stringify(A))},cid3:{code:"CSE 121",name:"Systems Design",active:!0,videos:JSON.parse(JSON.stringify(A))},cid4:{code:"CSE 101",name:"Computational Thinking",active:!0,videos:JSON.parse(JSON.stringify(A))},cid5:{code:"CSE 100",name:"Basic CS stuff",active:!1,videos:JSON.parse(JSON.stringify(A))},cid6:{code:"CSE 111",name:"Web design and development",active:!1,videos:JSON.parse(JSON.stringify(A))},unclassified:{code:"Unclassified",name:"unclassified",active:!0,videos:[]}};localStorage.getItem("data")||localStorage.setItem("data",JSON.stringify(L));var J=JSON.parse(localStorage.getItem("data"));window.data=J;var R=J,U=(n(157),n(37)),V=n.n(U),P=n(2),B=n(54),F=window.history.length;function z(){return Math.random().toString(36).replace("0.","")}function W(e){return e&&0===Object.keys(e).length&&e.constructor===Object}function Y(e){var t=Math.floor(e/3600);e%=3600;var n=Math.floor(e/60);e%=60;var i=t>0?t.toString().padStart(2,"0")+":":"",c=n.toString().padStart(2,0)+":",s=e.toString().padStart(2,0);return"".concat(i).concat(c).concat(s)}function q(){return(q=Object(B.a)(V.a.mark((function e(t){var n,i,c,s,a,r,o,l,d,u;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(e){var t,n,i,c,s,a,r;for(c={},a=0,r=(i=e.split("&")).length;a<r;a++){if(n=i[a],t=decodeURIComponent(n.split("=")[0]),s=decodeURIComponent(n.split("=")[1]||""),"url"==t){var o=new URLSearchParams(s).get("lsig");c.lsig=o}c[t]=s}return c},i=function(e){var t,n,i,c,s,a={};for(i=0,c=(s=e.streamingData.formats).length;i<c;i++){var r=s[i];n=r.mimeType.split(";")[0],t=r.quality,r.original_url=r.url,a[n+" "+t]=r}return a},c=function(e,t,n){var i,c,s,a,r;for(c in s=null,i=null,r=e.sources)(a=r[c]).mimeType.includes(t)&&(a.quality.match(n)?i=a:s=a);return i||s},e.next=5,fetch("https://at8u8s124e.execute-api.eu-west-1.amazonaws.com/prod?video_id=".concat(t),{headers:{"Content-Type":"text/plain"}});case 5:return s=e.sent,e.next=8,s.text();case 8:if(a=e.sent,"fail"!==(r=n(a)).status){e.next=13;break}return console.error("ERROR, failed to get video details"),e.abrupt("return",r);case 13:if((o=JSON.parse(r.player_response)).streamingData){e.next=16;break}throw"Video cannot be played due to youtube permission restrictions by video owner";case 16:return r.sources=i(o),l=c(r,"video/mp4","hd720"),d=o.videoDetails.title.split("+").join(" "),u=o.videoDetails.thumbnail.thumbnails[3]||o.videoDetails.thumbnail.thumbnails[0],e.abrupt("return",Object(P.a)(Object(P.a)({},l),{},{title:d,thumbnail:u.url}));case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var H=C.a.Panel,K=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var i;return Object(l.a)(this,n),(i=t.call(this,e)).currentCourseDetails=function(){var e="",t="";return null!==i.currentCourse&&(e=R[i.currentCourse].code||"",t=R[i.currentCourse].name||""),{code:e,name:t}},i.toggleAdd=function(){return i.setState({addModal:!i.state.addModal})},i.toggleEdit=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;i.currentCourse=i.state.editModal?null:e,i.setState({editModal:!i.state.editModal})},i.toggleArchive=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;i.currentCourse=i.state.archiveModal?null:e,i.setState({archiveModal:!i.state.archiveModal})},i.toggleUnArchive=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;i.currentCourse=i.state.unArchiveModal?null:e,i.setState({unArchiveModal:!i.state.unArchiveModal})},i.toggleDelete=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;i.currentCourse=i.state.deleteModal?null:e,i.setState({deleteModal:!i.state.deleteModal})},i.addModalBody=function(){return Object(b.jsxs)("div",{children:[Object(b.jsx)("p",{className:"label",children:"Course Code"}),Object(b.jsx)(j.a,{placeholder:"Eg. 'CSE 170'",ref:function(e){return i.codeInputRef=e}}),Object(b.jsx)("p",{className:"label",children:"Course Title"}),Object(b.jsx)(j.a,{placeholder:"Eg. 'Interaction Design'",ref:function(e){return i.nameInputRef=e}})]})},i.editModalBody=function(){var e=i.currentCourseDetails(),t=e.code,n=void 0===t?"":t,c=e.name,s=void 0===c?"":c;return Object(b.jsxs)("div",{children:[Object(b.jsx)("p",{className:"label",children:"Course Code"}),Object(b.jsx)(j.a,{placeholder:"Eg. 'CSE 170'",defaultValue:n,ref:function(e){return i.codeInputRef=e}}),Object(b.jsx)("p",{className:"label",children:"Course Title"}),Object(b.jsx)(j.a,{placeholder:"Eg. 'Interaction Design'",defaultValue:s,ref:function(e){return i.nameInputRef=e}})]})},i.archiveModalBody=function(){var e=i.currentCourseDetails(),t=e.code,n=void 0===t?"":t,c=e.name,s=void 0===c?"":c;return Object(b.jsxs)("div",{className:"archive-message",children:[Object(b.jsx)("p",{children:"Are you sure you want to archive"}),Object(b.jsx)("h2",{children:n}),Object(b.jsx)("h3",{children:s})]})},i.unArchiveModalBody=function(){var e=i.currentCourseDetails(),t=e.code,n=void 0===t?"":t,c=e.name,s=void 0===c?"":c;return Object(b.jsxs)("div",{className:"archive-message",children:[Object(b.jsx)("p",{children:"Are you sure you want to unarchive"}),Object(b.jsx)("h2",{children:n}),Object(b.jsx)("h3",{children:s})]})},i.deleteModalBody=function(){var e=i.currentCourseDetails(),t=e.code,n=void 0===t?"":t,c=e.name,s=void 0===c?"":c;return Object(b.jsxs)("div",{className:"error-message",children:[Object(b.jsx)("p",{children:"Are you sure you want to delete"}),Object(b.jsx)("h2",{children:n}),Object(b.jsx)("h3",{children:s}),Object(b.jsxs)("span",{children:[Object(b.jsx)("b",{children:"Danger!"})," Once you've deleted the course you cannot get it back, it is permanent."]})]})},i.addCourse=function(){var e=i.codeInputRef.state.value,t=i.nameInputRef.state.value,n="cid-"+z();R[n]={code:e,name:t,active:!0,videos:[]},localStorage.setItem("data",JSON.stringify(R)),i.toggleAdd(),S.b.success(Object(b.jsxs)("span",{children:['Course "',Object(b.jsx)("b",{children:e})," : ",t,'" successfully created!']}))},i.editCourse=function(){var e=i.codeInputRef.state.value,t=i.nameInputRef.state.value,n=i.currentCourse;R[n]=Object.assign(R[n],{code:e,name:t}),localStorage.setItem("data",JSON.stringify(R)),i.toggleEdit(),S.b.success(Object(b.jsxs)("span",{children:['Course "',Object(b.jsx)("b",{children:e})," : ",t,'" successfully edited!']}))},i.archiveCourse=function(){var e=R[i.currentCourse],t=e.code,n=e.name;R[i.currentCourse].active=!1,localStorage.setItem("data",JSON.stringify(R)),i.toggleArchive(),S.b.success(Object(b.jsxs)("span",{children:['Course "',Object(b.jsx)("b",{children:t})," : ",n,'" successfully archived!']}))},i.unArchiveCourse=function(){var e=R[i.currentCourse],t=e.code,n=e.name;R[i.currentCourse].active=!0,localStorage.setItem("data",JSON.stringify(R)),i.toggleUnArchive(),S.b.success(Object(b.jsxs)("span",{children:['Course "',Object(b.jsx)("b",{children:t})," : ",n,'" successfully unarchived!']}))},i.deleteCourse=function(){var e=R[i.currentCourse],t=e.code,n=e.name;delete R[i.currentCourse],localStorage.setItem("data",JSON.stringify(R)),i.toggleDelete(),S.b.success(Object(b.jsxs)("span",{children:['Course "',Object(b.jsx)("b",{children:t})," : ",n,'" successfully deleted!']}))},i.state={addModal:!1,editModal:!1,archiveModal:!1,deleteModal:!1,unArchiveModal:!1},i.codeInputRef=null,i.nameInputRef=null,i.currentCourse=null,i}return Object(d.a)(n,[{key:"render",value:function(){var e=this,t=Object.keys(R),n=this.state,i=n.addModal,c=n.editModal,s=n.archiveModal,a=n.deleteModal,r=n.unArchiveModal,o=t.filter((function(e){return R[e].active}));o.sort((function(e,t){return R[e].code>R[t].code?1:-1}));var l=t.filter((function(e){return!R[e].active}));return l.sort((function(e,t){return R[e].code>R[t].code?1:-1})),Object(b.jsxs)("div",{className:"courses-shell",children:[Object(b.jsx)(Q,{onAddCourse:this.toggleAdd}),Object(b.jsx)("div",{className:"course-container",children:Object(b.jsxs)(C.a,{defaultActiveKey:["1"],ghost:!0,expandIconPosition:"right",className:"course-collapse more-specificity",children:[Object(b.jsx)(H,{header:"Active",children:o.map((function(t){return Object(b.jsx)(_,{cid:t,onEdit:function(){return e.toggleEdit(t)},onArchive:function(){return e.toggleArchive(t)},onDelete:function(){return e.toggleDelete(t)}},t)}))},"1"),Object(b.jsx)(H,{header:"Archived",children:l.map((function(t){return Object(b.jsx)(_,{cid:t,onEdit:function(){return e.toggleEdit(t)},onUnArchive:function(){return e.toggleUnArchive(t)},onDelete:function(){return e.toggleDelete(t)}},t)}))},"2")]})}),Object(b.jsx)(k.a,{title:"Create course",visible:i,okText:"Create",onOk:this.addCourse,onCancel:this.toggleAdd,destroyOnClose:!0,className:"course-config-modal",children:this.addModalBody()}),Object(b.jsx)(k.a,{title:"Edit course",visible:c,okText:"Update",cancelText:"Discard changes",onOk:this.editCourse,onCancel:this.toggleEdit,destroyOnClose:!0,className:"course-config-modal",children:this.editModalBody()}),Object(b.jsx)(k.a,{title:Object(b.jsxs)("span",{className:"title",children:[Object(b.jsx)(I.a,{className:"arch-icon"})," Archive course"]}),visible:s,okText:"Archive",okType:"danger",onOk:this.archiveCourse,onCancel:this.toggleArchive,destroyOnClose:!0,className:"course-config-modal",children:this.archiveModalBody()}),Object(b.jsx)(k.a,{title:Object(b.jsx)("span",{className:"title",children:"Unarchive course"}),visible:r,okText:"Unarchive",okType:"primary",onOk:this.unArchiveCourse,onCancel:this.toggleUnArchive,destroyOnClose:!0,className:"course-config-modal",children:this.unArchiveModalBody()}),Object(b.jsx)(k.a,{title:Object(b.jsxs)("span",{className:"title",children:[Object(b.jsx)(I.a,{className:"delt-icon"})," Delete course"]}),visible:a,okText:"Delete the course",cancelText:"No, go back",onOk:this.deleteCourse,okType:"danger",onCancel:this.toggleDelete,cancelButtonProps:{type:"primary"},destroyOnClose:!0,className:"course-config-modal",children:this.deleteModalBody()})]})}}]),n}(c.a.Component);function Q(e){var t=e.onAddCourse,n=Object(o.g)();return Object(b.jsxs)("nav",{className:"all-courses-nav",children:[Object(b.jsx)(N,{style:{height:"36px",width:"36px",padding:"3px"},onClick:function(){n.push("/")}}),Object(b.jsx)("p",{children:"COURSES"}),Object(b.jsx)(T.a,{onClick:t})]})}function _(e){var t=R[e.cid],n=t.name,i=t.code,c=R[e.cid].videos.length,s=e.onEdit,a=e.onArchive,r=e.onDelete,l=e.onUnArchive,d=Object(o.g)(),u=G({onEdit:s,onArchive:a,onDelete:r,onUnArchive:l});return Object(b.jsxs)("div",{className:"course-card",onClick:function(){d.push("/notes/".concat(e.cid))},children:[Object(b.jsxs)("div",{className:"course-card-header",children:[Object(b.jsx)("h2",{className:"course-code",children:i}),Object(b.jsx)(D.a,{overlay:u,trigger:["click"],placement:"bottomRight",overlayClassName:"course-card-edit",children:Object(b.jsx)(E.a,{onClick:function(e){return e.stopPropagation()}})})]}),Object(b.jsx)("p",{className:"course-name",children:n}),Object(b.jsxs)("p",{className:"course-vcount",children:[c," Lectures "]})]})}var G=function(e){var t=e.onEdit,n=e.onArchive,i=e.onDelete,c=e.onUnArchive;return Object(b.jsxs)(w.a,{onClick:function(e){return e.domEvent.stopPropagation()},children:[Object(b.jsx)(w.a.Item,{onClick:t,children:"Edit Course"}),Object(b.jsx)(w.a.Divider,{}),n?Object(b.jsx)(w.a.Item,{onClick:n,children:"Archive Course"}):Object(b.jsx)(w.a.Item,{onClick:c,children:"Unarchive Course"}),Object(b.jsx)(w.a.Divider,{}),Object(b.jsx)(w.a.Item,{danger:!0,onClick:i,children:"Delete Course"})]})},X=n(9),Z=n(179),$=n(183),ee=n(105),te=n(188),ne=(n(159),j.a.Search),ie=C.a.Panel;function ce(e,t){return e.filter((function(e){return t.some((function(t){return e.tags.includes(t)}))}))}var se=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var i;Object(l.a)(this,n),(i=t.call(this,e)).goToHome=function(){return i.props.history.push("/")},i.getCid=function(){return i.props.match.params.courseId},i.getTagsOpts=function(){var e=i.getCid(),t=R[e].videos,n=[],c={};return t.map((function(e){return e.notes.map((function(e){return e.tags.map((function(e){return c[e]=!0}))}))})),Object.keys(c).map((function(e){return n.push({label:e,value:e})})),n},i.updateFilter=function(){var e=i.props,t=e.history,n=e.location;i.setState({filterTags:i.filterTags});var c=new URLSearchParams("");i.filterTags.forEach((function(e){return c.append("tags",e)})),t.replace("".concat(n.pathname,"?").concat(c))},i.onVideoDeleted=function(e){var t=i.getCid();R[t].videos=R[t].videos.filter((function(t){return t.id!=e})),localStorage.setItem("data",JSON.stringify(R)),i.forceUpdate()},i.getNav=function(){var e=i.getTagsOpts();return Object(b.jsxs)("nav",{className:"all-videos-nav",children:[Object(b.jsx)(N,{style:{height:"36px",width:"36px",padding:"3px"},onClick:i.goToHome}),Object(b.jsx)(Z.a,{mode:"tags",className:"filter-tags",placeholder:"Search by tags",showSearch:!0,allowClear:!0,defaultValue:i.filterTags,options:e,onDropdownVisibleChange:function(e){i.filterOpen=e,e||i.updateFilter()},onChange:function(e){i.filterTags=e,i.filterOpen||i.updateFilter()}}),Object(b.jsx)(ee.a,{style:{fontSize:"22px"}})]})},i.getAddModal=function(){var e=Object(b.jsx)("p",{className:"err-msg",children:"Please ensure that the URL is formatted correctly!"});return Object(b.jsxs)(k.a,{className:"add-lecture-modal",title:"Add a new lecture",onCancel:function(){return i.setState({addingLecture:!1})},visible:i.state.addingLecture,destroyOnClose:!0,footer:null,children:[Object(b.jsx)("h3",{children:" Video Link "}),Object(b.jsx)(ne,{placeholder:"Enter video link",allowClear:!0,enterButton:Object(b.jsx)(g.a,{}),onSearch:i.addLecture}),i.state.lectureValid?null:e]})},i.addLecture=function(e){if(""!==e){var t=function(e){e.startsWith("http")||(e="https://"+e);var t="";try{t=new URL(e)}catch(n){return console.log(n),""}return"www.youtube.com"!=t.host&&"youtube.com"!=t.host||"/watch"!=t.pathname?"":t.searchParams.get("v")}(e);""===t?i.setState({lectureValid:!1}):i.props.history.push("/video/".concat(t),{class:i.getCid()})}},i.getSearchResults=function(e,t){var n=(e=e.map((function(e){return Object(P.a)(Object(P.a)({},e),{},{notes:ce(e.notes,t)})})).filter((function(e){return e.notes.length>0}))).map((function(e){return e.id}));return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:"search-results",children:["You are currently searching for \xa0",t.map((function(e){return Object(b.jsx)("span",{className:"s-tag",children:e},e)}))]}),Object(b.jsx)(C.a,{ghost:!0,defaultActiveKey:n,expandIconPosition:"right",className:"video-search-collapse",children:e.map((function(e){return Object(b.jsx)(ie,{header:e.title,children:e.notes.map((function(t){return Object(b.jsx)(oe,{data:t,vid:e.id},t.id)}))},e.id)}))})]})},i.filterTags=[];var c=i.props.location.search||"",s=new URLSearchParams(c).getAll("tags");return s.length>0&&(i.filterTags=s),i.filterOpen=!1,i.state={filterTags:i.filterTags,addingLecture:!1,lectureValid:!0},i}return Object(d.a)(n,[{key:"render",value:function(){var e=this,t=this.props.match.params.courseId,n=this.state.filterTags,i=R[t],c=Object(X.a)(i.videos);return c.sort((function(e,t){return e.title<t.title?1:-1})),Object(b.jsxs)("div",{className:"videos-shell",children:[this.getNav(),Object(b.jsxs)($.a,{separator:Object(b.jsx)(g.a,{}),children:[Object(b.jsx)($.a.Item,{children:Object(b.jsx)(r.b,{to:"/",children:Object(b.jsx)(te.a,{})})}),Object(b.jsx)($.a.Item,{children:Object(b.jsx)(r.b,{to:"/notes",children:"Courses"})}),Object(b.jsx)($.a.Item,{children:i.code})]}),Object(b.jsxs)("div",{className:"video-container",children:[Object(b.jsxs)("div",{className:"course-title-container",children:[Object(b.jsxs)("h2",{className:"course-title",children:[i.code,": ",i.name]}),Object(b.jsx)(T.a,{onClick:function(){return e.setState({addingLecture:!0})}})]}),n.length?this.getSearchResults(c,n):c.map((function(t){return Object(b.jsx)(re,{video:t,onDeleted:function(){return e.onVideoDeleted(t.id)}},t.id)}))]}),this.getAddModal()]})}}]),n}(c.a.Component),ae=Object(o.i)(se);function re(e){var t=e.video,n=t.id,i=t.title,c=t.length,s=t.image,a=t.notes,r=a.length,l=Object(o.g)(),d=function(){var t="You have ".concat(a.length," notes and will lose all of them.\n    This action is irreversible!");k.a.confirm({title:"Are you sure you want to delete this lecture?",content:t,okText:"Delete",cancelText:"No, keep",okType:"danger",onOk:e.onDeleted})},u=Math.floor(c/60),h=c%60,j=u>0?"".concat(u," hours ").concat(h," min"):"".concat(h," min");return Object(b.jsxs)("div",{className:"video-card",onClick:function(){l.push("/video/".concat(n))},children:[Object(b.jsxs)("div",{className:"video-card-header",children:[Object(b.jsx)("h2",{className:"video-title",children:i}),Object(b.jsx)(D.a,{overlay:Object(b.jsx)(w.a,{onClick:function(e){return e.domEvent.stopPropagation()},children:Object(b.jsx)(w.a.Item,{danger:!0,onClick:d,children:"Delete Lecture"})}),trigger:["click"],placement:"bottomRight",overlayClassName:"video-card-edit",children:Object(b.jsx)(E.a,{onClick:function(e){return e.stopPropagation()}})})]}),Object(b.jsxs)("p",{className:"video-details",children:[r," Notes ",Object(b.jsx)("b",{children:"\xb7"})," ",j]}),Object(b.jsx)("img",{src:s,className:"thumbnail",alt:"Thumbnail for ".concat(i)})]})}function oe(e){var t=Object(o.g)(),n=e.data,i=n.tags,c=n.timestamp,s=n.content,a=void 0===s?"":s;return Object(b.jsxs)("div",{className:"note-item",children:[Object(b.jsx)("div",{className:"note-top",children:Object(b.jsx)("div",{className:"note-ts",onClick:function(){return n=c,void t.push("/video/".concat(e.vid,"?t=").concat(n));var n},children:Y(c)})}),Object(b.jsx)("div",{className:"note-content",children:a}),Object(b.jsx)("div",{className:"note-tags",children:i.map((function(e){return Object(b.jsxs)("div",{className:"note-tag",children:["#",e]},e)}))})]})}var le=n(181),de=n(177),ue=n(176),he=n(189),je=n(190),pe=n(191),ge=n(50),be=n.n(ge),fe=(n(161),j.a.TextArea);function ve(e){var t,n=!1;for(t in R)if(R[t].videos.find((function(t){return t.id===e}))){n=!0;break}return n?Object(P.a)({cid:t},R[t]):{cid:"unclassified"}}function me(e){var t=R[e].videos,n=[],i={};return t.map((function(e){return e.notes.map((function(e){return e.tags.map((function(e){return i[e]=!0}))}))})),Object.keys(i).map((function(e){return n.push({label:e,value:e})})),n}var Oe=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var i;return Object(l.a)(this,n),(i=t.call(this,e)).goToHome=function(){return i.props.history.push("/")},i.getVideoId=function(){return i.props.match.params.videoId},i.getNav=function(){var e=me(ve(i.getVideoId()).cid);return Object(b.jsxs)("nav",{className:"notes-nav",children:[Object(b.jsx)(N,{style:{height:"36px",width:"36px",padding:"3px"},onClick:i.goToHome}),Object(b.jsxs)("div",{className:"filter-select",children:[Object(b.jsx)(Z.a,{mode:"tags",className:"filter-tags specificiy",placeholder:"Search by tags",showSearch:!0,allowClear:!0,options:e,onDropdownVisibleChange:function(e){i.filterOpen=e,e||i.updateFilter()},onChange:function(e){i.filterTags=e,i.filterOpen||i.updateFilter()}}),Object(b.jsx)(ee.a,{style:{fontSize:"22px"}})]})]})},i.updateFilter=function(){i.setState({search:i.filterTags})},i.onNoteEditing=function(e){i.setState({editingNote:e})},i.onNoteEdited=function(e,t){if(e){var n=i.state.lectureDetails.notes,c=n.findIndex((function(e){return e.id===t.id}));n[c]=t,n.sort((function(e,t){return e.timestamp-t.timestamp})),localStorage.setItem("data",JSON.stringify(R))}i.setState({editingNote:null,newNote:!1}),e&&S.b.success('Note "'.concat(Y(t.timestamp),'" successfully edited!'))},i.onNoteDeleted=function(e){var t=i.state.lectureDetails,n=t.notes.filter((function(t){return t.id!==e})),c=Object(P.a)(Object(P.a)({},t),{},{notes:n});!function(e){var t=ve(e.id),n=t.videos.findIndex((function(t){return t.id==e.id}));t.videos[n]=e,localStorage.setItem("data",JSON.stringify(R))}(c),i.setState({lectureDetails:c,newNote:!1,editingNote:null}),S.b.success("Note successfully deleted!")},i.onNoteAdded=function(){var e="nid-"+z(),t={id:e,timestamp:Math.round(document.querySelector("#vid").currentTime),content:"",tags:[]},n=i.state.lectureDetails.notes;n.push(t),n.sort((function(e,t){return e.timestamp-t.timestamp})),localStorage.setItem("data",JSON.stringify(R)),i.setState({editingNote:e,pinned:!1,newNote:!0}),document.querySelector("#vid").pause()},i.updateTitleClass=function(){var e=ve(i.getVideoId()).cid,t=i.tempEdits.class;t&&t!==e&&(R[e].videos=R[e].videos.filter((function(e){return e.id!==i.getVideoId()})),R[t].videos.unshift(i.state.lectureDetails),localStorage.setItem("data",JSON.stringify(R))),i.tempEdits.title&&(i.state.lectureDetails.title=i.tempEdits.title,localStorage.setItem("data",JSON.stringify(R))),i.setState({editingLecture:!1}),i.tempEdits={}},i.getTitleModal=function(){var e=function(){for(var e=[],t=0,n=Object.keys(R);t<n.length;t++){var i=n[t],c="".concat(R[i].code," : ").concat(R[i].name);e.push({value:i,label:c})}return e}(),t=ve(i.getVideoId()).cid;return Object(b.jsx)(k.a,{title:"Edit lecture details",visible:i.state.editingLecture,okText:"Update",cancelText:"Discard changes",onCancel:function(){i.setState({editingLecture:!1}),i.tempEdits={}},onOk:i.updateTitleClass,destroyOnClose:!0,className:"lecture-edit-modal",children:Object(b.jsxs)("div",{className:"lecture-edit-body",children:[Object(b.jsx)("p",{className:"label",children:"Title"}),Object(b.jsx)(j.a,{placeholder:"Lecture Title",className:"title-input",defaultValue:i.state.lectureDetails.title,onChange:function(e){return i.tempEdits.title=e.target.value}}),Object(b.jsx)("p",{className:"label",children:"Course"}),Object(b.jsx)(Z.a,{defaultValue:t,options:e,onChange:function(e){return i.tempEdits.class=e}})]})})},i.getEditMenu=function(){return Object(b.jsxs)(w.a,{onClick:function(e){return e.domEvent.stopPropagation()},children:[Object(b.jsx)(w.a.Item,{onClick:function(){return i.setState({editingLecture:!0,tempEdits:{}})},children:"Edit Details"}),Object(b.jsx)(w.a.Item,{danger:!0,onClick:i.onDeleteing,children:"Delete Lecture"})]})},i.onDeleteing=function(){var e=i.state.lectureDetails.notes,t="You have ".concat(e.length," notes and will lose all of them.\n    This action is irreversible!");k.a.confirm({title:"Are you sure you want to delete this lecture?",content:t,okText:"Delete",cancelText:"No, keep",okType:"danger",onOk:i.deleteLecture})},i.deleteLecture=function(){var e=i.state.lectureDetails,t=ve(e.id).cid;R[t].videos=R[t].videos.filter((function(t){return t.id!=e.id})),localStorage.setItem("data",JSON.stringify(R)),S.b.success('Lecture "'.concat(e.title,'" has been deleted!')),i.props.history.length==F?i.props.history.replace("/"):i.props.history.goBack()},i.getLoadingDOM=function(){return Object(b.jsx)(le.a,{active:!0})},i.state={ytDetails:{},lectureDetails:{},editingNote:null,newNote:!1,editingLecture:!1,search:[],pinned:!0},i.tempEdits={},i.filterTags=[],i.filterOpen=!1,i}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.getVideoId(),n=function(e){var t,n,i=!1;for(t in R)if(n=R[t].videos.find((function(t){return t.id===e}))){i=!0;break}return i?n:{}}(t);(function(e){return q.apply(this,arguments)})(t).then((function(i){if(W(n)){var c,s=(r=parseInt(i.approxDurationMs)||0,Math.round(r/6e4));n={id:t,title:i.title,notes:[],image:i.thumbnail,length:s};var a=(null===(c=e.props.location.state)||void 0===c?void 0:c.class)||"unclassified";!function(e,t){R[e].videos.unshift(t),localStorage.setItem("data",JSON.stringify(R))}(a,n),S.b.success({duration:3,content:'Created a new lecture under "'.concat(R[a].name,'"'),top:100})}var r;e.setState({ytDetails:i,lectureDetails:n})})).catch((function(t){k.a.error({title:t,okText:"Okay",onOk:e.props.history.goBack})}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.lectureDetails,i=t.ytDetails.url,c=t.editingLecture,s=t.editingNote,a=t.pinned,l=t.search,d=t.newNote,u=this.getVideoId(),h=W(n),j=ve(u),p=n.notes;l.length>0&&(p=p.filter((function(e){return function(e,t){return t.some((function(t){return e.tags.includes(t)}))}(e,l)})));var g=!(s||l.length>0);return Object(b.jsxs)("div",{className:"notes-shell",children:[this.getNav(),Object(b.jsx)(Ne,{url:i,pinned:a}),h?this.getLoadingDOM():Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:"notes-content-wrapper",children:[Object(b.jsxs)("div",{className:"lecture-details",children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{className:"lecture-title",children:n.title}),Object(b.jsx)(r.b,{to:"/notes/".concat(j.cid),children:Object(b.jsxs)("span",{className:"lecture-course",children:[j.code," ",Object(b.jsx)("b",{children:"\xb7"})," ",j.name,Object(b.jsx)(he.a,{style:{fontSize:"14px",paddingLeft:"6px"}})]})})]}),Object(b.jsx)(D.a,{overlay:this.getEditMenu(),trigger:["click"],placement:"bottomRight",overlayClassName:"",children:Object(b.jsx)(E.a,{onClick:function(e){return e.stopPropagation()}})}),this.getTitleModal()]}),Object(b.jsx)(o.a,{when:!(!s&&!c),message:function(e){return"You have unsaved edits! Are you sure you want to move away?"}}),l.length>0?Object(b.jsxs)("div",{className:"search-results",children:["You are currently searching for \xa0",Object(b.jsx)("p",{style:{margin:"7px 0"},children:l.map((function(e){return Object(b.jsx)("span",{className:"s-tag",children:e},e)}))}),Object(b.jsx)("span",{style:{color:"gray"},children:"To edit or create new notes, please clear the search."})]}):null,Object(b.jsx)("div",{className:"notes-container",children:p.map((function(t){return Object(b.jsx)(ye,{data:t,vid:u,editMode:s==t.id,editable:g,newNote:d,onEditing:function(){return e.onNoteEditing(t.id)},onDeleted:function(){return e.onNoteDeleted(t.id)},onEdited:e.onNoteEdited},t.id)}))})]}),Object(b.jsxs)("div",{className:"notes-footer",children:[Object(b.jsx)("div",{className:"left-side",children:g?Object(b.jsx)(T.a,{onClick:this.onNoteAdded,style:{marginRight:"18px"}}):null}),Object(b.jsx)("div",{className:"right-side",children:a?Object(b.jsx)(je.a,{onClick:function(){return e.setState({pinned:!1})}}):Object(b.jsx)(pe.a,{onClick:function(){return e.setState({pinned:!0})}})})]})]})]})}}]),n}(c.a.Component),xe=Object(o.i)(Oe),ye=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var i;return Object(l.a)(this,n),(i=t.call(this,e)).onTimestamp=function(e){document.querySelector("#vid").currentTime=e},i.onEditing=function(){i.props.onEditing()},i.onDeleteing=function(){k.a.confirm({title:"Are you sure you want to delete this note?",okText:"Delete",cancelText:"No, keep",okType:"danger",onOk:i.props.onDeleted})},i.getEditMenu=function(){return Object(b.jsxs)(w.a,{onClick:function(e){return e.domEvent.stopPropagation()},children:[Object(b.jsx)(w.a.Item,{onClick:i.props.onEditing,children:"Edit Note"}),Object(b.jsx)(w.a.Divider,{}),Object(b.jsx)(w.a.Item,{danger:!0,onClick:i.onDeleteing,children:"Delete Note"})]})},i.onDone=function(e){if(e){var t=Object(P.a)(Object(P.a)({},i.props.data),i.editData);i.props.onEdited(e,t)}else i.props.newNote?i.props.onDeleted():i.props.onEdited(e,null);i.editData={}},i.timeUpdated=function(e,t){return i.editData.timestamp=function(e){var t=e.split(":").map((function(e){return parseInt(e)}));return 3==t.length?3600*t[0]+60*t[1]+t[2]:60*t[0]+t[1]}(t)},i.contentUpdated=function(e){return i.editData.content=e.target.value},i.getEditBody=function(){var e=i.props.data,t=e.timestamp,n=e.content,c=e.tags,s=i.props.newNote,a=t>=3600?"hh:mm:ss":"mm:ss",r=be()(Y(t),a),o=Object(b.jsxs)("div",{children:[Object(b.jsx)(p.a,{danger:!0,onClick:function(){return i.onDone(!1)},style:{marginRight:"10px"},children:"Discard"}),Object(b.jsx)(p.a,{type:"primary",onClick:function(){return i.onDone(!0)},children:s?"Create":"Save"})]}),l=me(ve(i.props.vid).cid);return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:"note-top-edit",children:[Object(b.jsx)(de.a,{defaultValue:r,format:a,showNow:!1,onChange:i.timeUpdated}),o]}),Object(b.jsx)("div",{className:"note-content-edit",children:Object(b.jsx)(fe,{rows:3,defaultValue:n||"",onChange:i.contentUpdated})}),Object(b.jsxs)("div",{className:"note-tags-edit",children:[Object(b.jsx)(Z.a,{mode:"tags",className:"edit-tags",placeholder:"add tags",showSearch:!0,options:l,defaultValue:c,onChange:function(e){return i.editData.tags=e}}),Object(b.jsx)(T.a,{})]})]})},i.editData={},i.note=c.a.createRef(),i}return Object(d.a)(n,[{key:"componentDidUpdate",value:function(e){e.editMode!=this.props.editMode&&this.note.current.scrollIntoView({behavior:"smooth",block:"center"})}},{key:"componentDidMount",value:function(){1==this.props.editMode&&this.note.current.scrollIntoView({behavior:"smooth",block:"center"})}},{key:"render",value:function(){var e=this,t=this.props,n=t.editMode,i=t.editable,c=this.props.data,s=c.tags,a=c.timestamp,r=c.content,o=void 0===r?"":r;return Object(b.jsx)("div",{className:"note-item",ref:this.note,children:n?this.getEditBody():Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:"note-top",children:[Object(b.jsx)("div",{className:"note-ts",onClick:function(){return e.onTimestamp(a)},children:Y(a)}),Object(b.jsx)("div",{className:"note-edit",style:i?{}:{display:"none"},children:Object(b.jsx)(D.a,{overlay:this.getEditMenu(),trigger:["click"],placement:"bottomRight",overlayClassName:"note-item-edit",children:Object(b.jsx)(E.a,{onClick:function(e){return e.stopPropagation()}})})})]}),Object(b.jsx)("div",{className:"note-content",children:o}),Object(b.jsx)("div",{className:"note-tags",children:s.map((function(e){return Object(b.jsxs)("div",{className:"note-tag",children:["#",e]},e)}))})]})})}}]),n}(c.a.Component),Ne=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var i;return Object(l.a)(this,n),(i=t.call(this,e)).getVideoDOM=function(){var e=new URLSearchParams(window.location.search),t=0;null!=e.get("t")&&(t=parseInt(e.get("t")));var n=i.props.url||"",c="".concat(i.state.width*(9/16),"px");return Object(b.jsx)("video",{id:"vid",autoPlay:!0,controls:!0,src:"".concat(n,"#t=").concat(t),style:{height:c}})},i.getLoadingDOM=function(){return Object(b.jsx)(ue.a,{tip:"Loading..."})},i.player=c.a.createRef(),i.state={video:null,width:null},i}return Object(d.a)(n,[{key:"componentWillUnmount",value:function(){delete this.observer}},{key:"getTime",value:function(){}},{key:"getLength",value:function(){}},{key:"seek",value:function(){}},{key:"play",value:function(e){}},{key:"componentDidMount",value:function(){var e,t=this;this.observer=new ResizeObserver((function(){var e=t.player.current;e&&e.offsetWidth!=t.state.width&&t.setState({width:t.player.current.offsetWidth})})),this.observer.observe(this.player.current),this.setState({width:null===(e=this.player.current)||void 0===e?void 0:e.offsetWidth})}},{key:"render",value:function(){var e=this.state.width,t=this.props,n=t.url,i=t.pinned,c=n?this.getVideoDOM():this.getLoadingDOM(),s="".concat(this.state.width*(9/16),"px"),a=i?"video-player pinned":"video-player";return Object(b.jsx)("div",{className:a,ref:this.player,children:e&&Object(b.jsx)("div",{className:"video-container",style:{height:s},children:c})})}}]),n}(c.a.Component);n(172);function Ce(){return Object(b.jsx)(r.a,{children:Object(b.jsx)("div",{className:"app-shell",children:Object(b.jsxs)(o.d,{children:[Object(b.jsx)(o.b,{exact:!0,path:"/",children:Object(b.jsx)(v,{})}),Object(b.jsx)(o.b,{exact:!0,path:"/notes",children:Object(b.jsx)(K,{})}),Object(b.jsx)(o.b,{exact:!0,path:"/notes/:courseId",children:Object(b.jsx)(ae,{})}),Object(b.jsx)(o.b,{path:"/notes/:courseId/:videoId",children:Object(b.jsx)(De,{})}),Object(b.jsx)(o.b,{path:"/video/:videoId",children:Object(b.jsx)(xe,{})}),Object(b.jsx)(o.b,{path:"/about",children:Object(b.jsx)(Se,{})}),Object(b.jsx)(o.b,{path:"*",children:Object(b.jsx)(ke,{})})]})})})}function Se(){return Object(b.jsx)("h2",{children:"About"})}function ke(){return Object(b.jsx)("h2",{children:"404"})}function De(){var e=Object(o.h)(),t=e.courseId,n=e.videoId;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{children:['List of notes for the video "',n,'" of course "',t,'"']}),Object(b.jsxs)("ul",{children:[Object(b.jsx)("li",{children:"Note #1"}),Object(b.jsx)("li",{children:"Note #2"}),Object(b.jsx)("li",{children:"Note #3"})]})]})}a.a.render(Object(b.jsx)(Ce,{}),document.getElementById("root"))}},[[173,1,2]]]);
//# sourceMappingURL=main.00eea3a7.chunk.js.map