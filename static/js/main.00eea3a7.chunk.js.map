{"version":3,"sources":["Home.js","components/Logo.js","data.js","utils.js","AllCourses.js","AllVideos.js","VideoNotes.js","App.js","index.js"],"names":["Search","Input","Home","className","NameLogo","VideoLink","NotesLink","src","alt","_VideoLink","props","onSearch","val","id","getVideoId","setState","error","history","push","state","inputRef","this","focus","cursor","startsWith","console","log","url","URL","e","host","pathname","searchParams","get","errMsg","placeholder","ref","input","allowClear","enterButton","CaretRightOutlined","React","Component","withRouter","icon","style","display","fontSize","useHistory","type","size","shape","alignItems","onClick","ev","Logo","clicked","Object","assign","height","background","borderRadius","padding","notes","videos","title","length","JSON","parse","stringify","image","_data","cid1","code","name","active","cid2","cid3","cid4","cid5","cid6","unclassified","localStorage","getItem","setItem","data","window","historyLen","randstr","Math","random","toString","replace","isEmpty","obj","keys","constructor","secToStr","sec","hr","floor","min","hs","padStart","ms","ss","video_id","a","decodeQueryString","queryString","key","keyValPair","keyValPairs","r","_i","_len","split","decodeURIComponent","lsig","URLSearchParams","decodeStreamMap","player_response","quality","_ref","sources","streamingData","formats","stream","mimeType","original_url","getSource","video","exact","lowest","source","includes","match","fetch","headers","response","text","video_info","status","res","videoDetails","join","thumbnail","thumbnails","Panel","Collapse","AllCourses","currentCourseDetails","currentCourse","toggleAdd","addModal","toggleEdit","editModal","toggleArchive","archiveModal","toggleUnArchive","unArchiveModal","toggleDelete","deleteModal","addModalBody","codeInputRef","nameInputRef","editModalBody","defaultValue","archiveModalBody","unArchiveModalBody","deleteModalBody","addCourse","value","cid","message","success","editCourse","archiveCourse","unArchiveCourse","deleteCourse","objs","cr_active","filter","sort","cr_archived","Nav","onAddCourse","defaultActiveKey","ghost","expandIconPosition","header","map","Course","onEdit","onArchive","onDelete","onUnArchive","visible","okText","onOk","onCancel","destroyOnClose","cancelText","WarningFilled","okType","cancelButtonProps","width","PlusOutlined","vcount","menu","courseCardMenu","overlay","trigger","placement","overlayClassName","SettingFilled","stopPropagation","domEvent","Item","Divider","danger","filterNotesByTags","tags","note","some","tag","AllVideos","goToHome","getCid","params","getTagsOpts","tagOptions","label","updateFilter","location","filterTags","forEach","append","onVideoDeleted","vid","forceUpdate","getNav","options","mode","showSearch","onDropdownVisibleChange","open","filterOpen","onChange","SearchOutlined","getAddModal","addingLecture","footer","addLecture","lectureValid","urlToVid","class","getSearchResults","vids","s","q","search","getAll","course","v1","v2","separator","to","HomeOutlined","Video","onDeleted","ncount","onDeleteing","content","Modal","confirm","h","m","time","Note","timestamp","TextArea","getVideoCourse","found","find","VideoNotes","onNoteEditing","nid","editingNote","onNoteEdited","update","uNote","lectureDetails","i","findIndex","n1","n2","newNote","onNoteDeleted","lecture","newLecture","uIndex","editVideoDetails","onNoteAdded","round","document","querySelector","currentTime","pinned","pause","updateTitleClass","oldCid","newCid","tempEdits","v","unshift","editingLecture","getTitleModal","opts","getCourseOpts","target","getEditMenu","deleteLecture","goBack","getLoadingDOM","ytDetails","getVideoDetails","getYTDetails","then","parseInt","createVideoEntry","duration","top","catch","loading","noteHasTag","editable","ArrowRightOutlined","paddingLeft","when","_","margin","color","editMode","onEditing","onEdited","marginRight","PushpinFilled","PushpinOutlined","onTimestamp","onDone","editData","timeUpdated","timeStr","str","strToSec","contentUpdated","getEditBody","isNew","timeFormat","defaultTime","moment","buttons","format","showNow","rows","createRef","oProps","current","scrollIntoView","behavior","block","VideoPlayer","getVideoDOM","autoPlay","controls","tip","player","observer","ResizeObserver","el","offsetWidth","observe","rootClass","App","path","CourseNotes","About","NoMatch","useParams","courseId","videoId","ReactDOM","render","getElementById"],"mappings":"qWAOQA,EAAWC,IAAXD,OAEO,SAASE,IACtB,OACE,qBAAKC,UAAU,aAAf,SACE,sBAAKA,UAAU,eAAf,UACE,cAACC,EAAD,IACA,cAACC,EAAD,IACA,mBAAGF,UAAU,eAAb,gBACA,cAACG,EAAD,SAMR,SAASF,IACP,OACE,sBAAKD,UAAU,aAAf,UACI,2CACA,qBAAKI,IAAI,eAAeC,IAAI,sB,IAK9BC,E,kDACJ,WAAYC,GAAO,IAAD,8BAChB,cAAMA,IAWRC,SAAW,SAAAC,GACT,GAAY,KAARA,EAAJ,CAGA,IAAIC,EAAK,EAAKC,WAAWF,GACf,KAAPC,EACD,EAAKE,SAAS,CAACC,OAAO,IAGtB,EAAKN,MAAMO,QAAQC,KAAnB,iBAAkCL,MAnBpC,EAAKM,MAAQ,CAACH,OAAM,GACpB,EAAKI,SAAW,KAHA,E,qDAMlB,WACEC,KAAKD,SAASE,MAAM,CAClBC,OAAQ,U,wBAiBZ,SAAWX,GACLA,EAAIY,WAAW,UACjBZ,EAAM,WAAWA,EACjBa,QAAQC,IAAId,IAEd,IAAIe,EAAM,GACV,IACEA,EAAM,IAAIC,IAAIhB,GACd,MAAMiB,GAEN,OADAJ,QAAQC,IAAIG,GACL,GAGT,MAAiB,mBAAZF,EAAIG,MAAyC,eAAZH,EAAIG,MACrB,UAAhBH,EAAII,SAIF,GAHMJ,EAAIK,aAAaC,IAAI,O,oBAMpC,WAAS,IAAD,OACAC,EAAS,mBAAG/B,UAAU,UAAb,gEACf,OACI,sBAAKA,UAAU,kBAAf,UACI,4CACA,8EACA,cAACH,EAAD,CACEmC,YAAY,mBACZC,IAAK,SAAAC,GAAK,OAAK,EAAKjB,SAAWiB,GAC/BC,YAAU,EACVC,YAAa,cAACC,EAAA,EAAD,IACb7B,SAAUU,KAAKV,WAEhBU,KAAKF,MAAMH,MAAOkB,EAAS,Y,GA5DfO,IAAMC,WAkEzBrC,EAAYsC,YAAWlC,GAG7B,SAASH,IACP,IAAMsC,EAAO,cAACJ,EAAA,EAAD,CAAoBK,MAAO,CAACC,QAAQ,OAAQC,SAAS,UAE9D9B,EAAU+B,cAKd,OACE,sBAAK7C,UAAU,aAAf,UACI,eAAC,IAAD,CACE8C,KAAK,UACLC,KAAK,QACLC,MAAM,QACNN,MAZS,CAACC,QAAQ,OAAQM,WAAW,UAarCC,QAVe,SAAAC,GACrBrC,EAAQC,KAAK,WAIT,2BAOmB0B,KAEnB,+DCpHO,SAASW,EAAK7C,GAC3B,IAAM8C,EAAU9C,EAAM2C,QAClBR,EAAQnC,EAAMmC,OAAS,GAQ3B,OAPAA,EAAQY,OAAOC,OAAO,CACEC,OAAO,QACPC,WAAW,UACXC,aAAa,MACbC,QAAS,MACTvC,OAAQ,WACPsB,GAEvB,qBAAK1C,UAAU,OACVI,IAAI,eACJC,IAAI,iBACJqC,MAAOA,EACPQ,QAASG,I,4EClBdO,EAAQ,CACV,CACE,GAAK,OACL,UAAY,IACZ,QAAU,eACV,KAAO,CAAE,MAAO,OAAQ,QAE1B,CACE,GAAK,OACL,UAAY,IACZ,QAAU,eACV,KAAO,CAAE,OAAQ,cAEnB,CACE,GAAK,OACL,UAAY,IACZ,QAAU,eACV,KAAO,CAAC,MAAM,YAAY,QAE5B,CACE,GAAK,OACL,UAAY,IACZ,QAAU,eACV,KAAO,CAAC,MAAM,KAAK,WAErB,CACE,GAAK,OACL,UAAY,IACZ,QAAU,eACV,KAAO,CAAC,SAEV,CACE,GAAK,OACL,UAAY,KACZ,QAAU,eACV,KAAO,CAAC,MAAM,OAAO,OAEvB,CACE,GAAK,OACL,UAAY,KACZ,QAAU,eACV,KAAO,CAAC,SAAS,MAAM,UAIvBC,EAAS,CACX,CACEnD,GAAK,cACLoD,MAAO,kCACPC,OAAQ,GACRH,MAAOI,KAAKC,MAAMD,KAAKE,UAAUN,IACjCO,MAAO,uBAET,CACEzD,GAAK,cACLoD,MAAO,iCACPC,OAAQ,GACRH,MAAOI,KAAKC,MAAMD,KAAKE,UAAUN,IACjCO,MAAO,uBAET,CACEzD,GAAK,cACLoD,MAAO,oCACPC,OAAQ,GACRH,MAAOI,KAAKC,MAAMD,KAAKE,UAAUN,IACjCO,MAAO,uBAET,CACEzD,GAAK,cACLoD,MAAO,4BACPC,OAAQ,GACRH,MAAOI,KAAKC,MAAMD,KAAKE,UAAUN,IACjCO,MAAO,uBAET,CACEzD,GAAK,cACLoD,MAAO,oCACPC,OAAQ,GACRH,MAAOI,KAAKC,MAAMD,KAAKE,UAAUN,IACjCO,MAAO,uBAET,CACEzD,GAAK,cACLoD,MAAO,sCACPC,OAAQ,GACRH,MAAOI,KAAKC,MAAMD,KAAKE,UAAUN,IACjCO,MAAO,wBAIPC,EAAQ,CACVC,KAAO,CACLC,KAAM,UACNC,KAAM,aACNC,QAAQ,EACRX,OAAQG,KAAKC,MAAMD,KAAKE,UAAUL,KAEpCY,KAAO,CACLH,KAAM,UACNC,KAAM,wCACNC,QAAQ,EACRX,OAAQG,KAAKC,MAAMD,KAAKE,UAAUL,KAEpCa,KAAO,CACLJ,KAAM,UACNC,KAAM,iBACNC,QAAQ,EACRX,OAAQG,KAAKC,MAAMD,KAAKE,UAAUL,KAEpCc,KAAO,CACLL,KAAM,UACNC,KAAM,yBACNC,QAAQ,EACRX,OAAQG,KAAKC,MAAMD,KAAKE,UAAUL,KAEpCe,KAAO,CACLN,KAAM,UACNC,KAAM,iBACNC,QAAQ,EACRX,OAAQG,KAAKC,MAAMD,KAAKE,UAAUL,KAEpCgB,KAAO,CACLP,KAAM,UACNC,KAAM,6BACNC,QAAQ,EACRX,OAAQG,KAAKC,MAAMD,KAAKE,UAAUL,KAEpCiB,aAAe,CACbR,KAAM,eACNC,KAAM,eACNC,QAAQ,EACRX,OAAQ,KAKRkB,aAAaC,QAAQ,SACvBD,aAAaE,QAAQ,OAAQjB,KAAKE,UAAUE,IAG9C,IAAIc,EAAOlB,KAAKC,MAAMc,aAAaC,QAAQ,SAC3CG,OAAOD,KAAOA,EAECA,Q,yCC/IFE,EAAaD,OAAOrE,QAAQiD,OAElC,SAASsB,IACZ,OAAOC,KAAKC,SAASC,SAAS,IAAIC,QAAQ,KAAK,IAG5C,SAASC,EAAQC,GACpB,OAAOA,GAAmC,IAA5BrC,OAAOsC,KAAKD,GAAK5B,QAAgB4B,EAAIE,cAAgBvC,OAShE,SAASwC,EAASC,GACvB,IAAIC,EAAKV,KAAKW,MAAMF,EAAG,MACvBA,GAAS,KACT,IAAIG,EAAMZ,KAAKW,MAAMF,EAAM,IAC3BA,GAAY,GAEZ,IAAII,EAAKH,EAAK,EAAIA,EAAGR,WAAWY,SAAS,EAAG,KAAK,IAAM,GACnDC,EAAKH,EAAIV,WAAWY,SAAS,EAAE,GAAG,IAClCE,EAAKP,EAAIP,WAAWY,SAAS,EAAE,GACnC,MAAM,GAAN,OAAUD,GAAV,OAAeE,GAAf,OAAoBC,G,4CA+Bf,WAA4BC,GAA5B,iCAAAC,EAAA,6DACCC,EAAoB,SAACC,GACzB,IAAIC,EAAKC,EAAYC,EAAaC,EAAGrG,EAAKsG,EAAIC,EAG9C,IAFAF,EAAI,GAECC,EAAK,EAAGC,GADbH,EAAcH,EAAYO,MAAM,MACAlD,OAAQgD,EAAKC,EAAMD,IAAM,CAIvD,GAHAH,EAAaC,EAAYE,GACzBJ,EAAMO,mBAAmBN,EAAWK,MAAM,KAAK,IAC/CxG,EAAMyG,mBAAmBN,EAAWK,MAAM,KAAK,IAAM,IAC1C,OAAPN,EAAc,CAChB,IACIQ,EADY,IAAIC,gBAAgB3G,GACfqB,IAAI,QACzBgF,EAAEK,KAAOA,EAEXL,EAAEH,GAAOlG,EAEX,OAAOqG,GAGHO,EAAkB,SAACC,GACvB,IAAIC,EAASzE,EAAMiE,EAAIC,EAAMQ,EACzBC,EAAU,GAEd,IAAKV,EAAK,EAAGC,GADbQ,EAAOF,EAAgBI,cAAcC,SACZ5D,OAAQgD,EAAKC,EAAMD,IAAM,CAChD,IAAIa,EAASJ,EAAKT,GAClBjE,EAAO8E,EAAOC,SAASZ,MAAM,KAAK,GAClCM,EAAUK,EAAOL,QACjBK,EAAOE,aAAeF,EAAOpG,IAC7BiG,EAAa3E,EAAO,IAAMyE,GAAWK,EAEvC,OAAOH,GAGHM,EAAY,SAACC,EAAOlF,EAAMyE,GAC9B,IAAIU,EAAOtB,EAAKuB,EAAQC,EAAQX,EAIhC,IAAKb,KAHLuB,EAAS,KACTD,EAAQ,KACRT,EAAOQ,EAAMP,SAEXU,EAASX,EAAKb,IACHkB,SAASO,SAAStF,KACvBqF,EAAOZ,QAAQc,MAAMd,GACvBU,EAAQE,EAERD,EAASC,GAIf,OAAOF,GAASC,GAhDb,SAmDkBI,MAAM,wEAAD,OAAyE/B,GACnF,CAACgC,QAAS,CAAE,eAAiB,gBApD1C,cAmDCC,EAnDD,gBAqDoBA,EAASC,OArD7B,UAqDCC,EArDD,OAuDgB,UADjBV,EAAQvB,EAAkBiC,IACpBC,OAvDL,wBAwDHrH,QAAQT,MAAM,sCAxDX,kBAyDImH,GAzDJ,YA2DDY,EAAM5E,KAAKC,MAAM+D,EAAMV,kBACnBI,cA5DH,sBA6DG,+EA7DH,eA+DLM,EAAMP,QAAUJ,EAAgBuB,GAC5BT,EAASJ,EAAUC,EAAO,YAAa,SACvClE,EAAQ8E,EAAIC,aAAa/E,MAAMmD,MAAM,KAAK6B,KAAK,KAC/CC,EAAYH,EAAIC,aAAaE,UAAUC,WAAW,IACtCJ,EAAIC,aAAaE,UAAUC,WAAW,GAnEjD,6CAoEQb,GApER,IAoEgBrE,QAAOiF,UAAWA,EAAUvH,OApE5C,6C,0BC/CCyH,EAAUC,IAAVD,MAGaE,E,kDACnB,WAAY5I,GAAO,IAAD,8BAChB,cAAMA,IAcR6I,qBAAuB,WACrB,IAAI9E,EAAO,GAAIC,EAAO,GAKtB,OAJ2B,OAAvB,EAAK8E,gBACP/E,EAAOY,EAAK,EAAKmE,eAAe/E,MAAQ,GACxCC,EAAOW,EAAK,EAAKmE,eAAe9E,MAAQ,IAEnC,CAACD,OAAMC,SArBE,EAyBlB+E,UAAY,kBAAM,EAAK1I,SAAS,CAAC2I,UAAU,EAAKvI,MAAMuI,YAzBpC,EA0BlBC,WAAa,WAAe,IAAd7C,EAAa,uDAAT,KAGhB,EAAK0C,cAAgB,EAAKrI,MAAMyI,UAAW,KAAO9C,EAClD,EAAK/F,SAAS,CAAC6I,WAAW,EAAKzI,MAAMyI,aA9BrB,EAgClBC,cAAgB,WAAe,IAAd/C,EAAa,uDAAT,KACnB,EAAK0C,cAAgB,EAAKrI,MAAM2I,aAAc,KAAOhD,EACrD,EAAK/F,SAAS,CAAC+I,cAAc,EAAK3I,MAAM2I,gBAlCxB,EAoClBC,gBAAkB,WAAe,IAAdjD,EAAa,uDAAT,KACrB,EAAK0C,cAAgB,EAAKrI,MAAM6I,eAAgB,KAAOlD,EACvD,EAAK/F,SAAS,CAACiJ,gBAAgB,EAAK7I,MAAM6I,kBAtC1B,EAwClBC,aAAe,WAAe,IAAdnD,EAAa,uDAAT,KAClB,EAAK0C,cAAgB,EAAKrI,MAAM+I,YAAa,KAAOpD,EACpD,EAAK/F,SAAS,CAACmJ,aAAa,EAAK/I,MAAM+I,eA1CvB,EA8ClBC,aAAe,kBACb,gCACE,mBAAGhK,UAAU,QAAb,yBACA,cAAC,IAAD,CAAQgC,YAAY,gBACZC,IAAK,SAAAC,GAAK,OAAI,EAAK+H,aAAe/H,KAC1C,mBAAGlC,UAAU,QAAb,0BACA,cAAC,IAAD,CAAQgC,YAAY,2BACZC,IAAK,SAAAC,GAAK,OAAI,EAAKgI,aAAehI,SArD5B,EAwDlBiI,cAAgB,WAAO,IAAD,EACS,EAAKf,uBADd,IACf9E,YADe,MACR,GADQ,MACJC,YADI,MACG,GADH,EAEpB,OACE,gCACE,mBAAGvE,UAAU,QAAb,yBACA,cAAC,IAAD,CAAQgC,YAAY,gBACZoI,aAAc9F,EACdrC,IAAK,SAAAC,GAAK,OAAI,EAAK+H,aAAe/H,KAC1C,mBAAGlC,UAAU,QAAb,0BACA,cAAC,IAAD,CAAQgC,YAAY,2BACZoI,aAAc7F,EACdtC,IAAK,SAAAC,GAAK,OAAI,EAAKgI,aAAehI,SAnE9B,EAuElBmI,iBAAmB,WAAO,IAAD,EACM,EAAKjB,uBADX,IAClB9E,YADkB,MACX,GADW,MACPC,YADO,MACA,GADA,EAEvB,OACE,sBAAKvE,UAAU,kBAAf,UACE,iEACA,6BAAKsE,IACL,6BAAKC,QA7EO,EAiFlB+F,mBAAqB,WAAO,IAAD,EACI,EAAKlB,uBADT,IACpB9E,YADoB,MACb,GADa,MACTC,YADS,MACF,GADE,EAEzB,OACE,sBAAKvE,UAAU,kBAAf,UACE,mEACA,6BAAKsE,IACL,6BAAKC,QAvFO,EA2FlBgG,gBAAkB,WAAO,IAAD,EACO,EAAKnB,uBADZ,IACjB9E,YADiB,MACV,GADU,MACNC,YADM,MACC,GADD,EAEtB,OACE,sBAAKvE,UAAU,gBAAf,UACE,gEACA,6BAAKsE,IACL,6BAAKC,IACL,iCAAM,wCAAN,kFAlGY,EAyGlBiG,UAAY,WACV,IAAIlG,EAAO,EAAK2F,aAAajJ,MAAMyJ,MAC/BlG,EAAO,EAAK2F,aAAalJ,MAAMyJ,MAE/BC,EAAM,OAASrF,IACnBH,EAAKwF,GAAO,CAACpG,OAAMC,OAAMC,QAAO,EAAMX,OAAO,IAC7CkB,aAAaE,QAAQ,OAAQjB,KAAKE,UAAUgB,IAC5C,EAAKoE,YACLqB,IAAQC,QAAQ,4CAAc,4BAAItG,IAAlB,MAA+BC,EAA/B,+BAjHA,EAmHlBsG,WAAa,WACX,IAAIvG,EAAO,EAAK2F,aAAajJ,MAAMyJ,MAC/BlG,EAAO,EAAK2F,aAAalJ,MAAMyJ,MAE/BC,EAAM,EAAKrB,cACfnE,EAAKwF,GAAOpH,OAAOC,OAAO2B,EAAKwF,GAAM,CAACpG,OAAMC,SAC5CQ,aAAaE,QAAQ,OAAQjB,KAAKE,UAAUgB,IAC5C,EAAKsE,aACLmB,IAAQC,QAAQ,4CAAc,4BAAItG,IAAlB,MAA+BC,EAA/B,8BA3HA,EA6HlBuG,cAAgB,WAAO,IAAD,EACD5F,EAAK,EAAKmE,eAAxB/E,EADe,EACfA,KAAMC,EADS,EACTA,KACXW,EAAK,EAAKmE,eAAe7E,QAAS,EAClCO,aAAaE,QAAQ,OAAQjB,KAAKE,UAAUgB,IAC5C,EAAKwE,gBACLiB,IAAQC,QAAQ,4CAAc,4BAAItG,IAAlB,MAA+BC,EAA/B,gCAlIA,EAoIlBwG,gBAAkB,WAAO,IAAD,EACH7F,EAAK,EAAKmE,eAAxB/E,EADiB,EACjBA,KAAMC,EADW,EACXA,KACXW,EAAK,EAAKmE,eAAe7E,QAAS,EAClCO,aAAaE,QAAQ,OAAQjB,KAAKE,UAAUgB,IAC5C,EAAK0E,kBACLe,IAAQC,QAAQ,4CAAc,4BAAItG,IAAlB,MAA+BC,EAA/B,kCAzIA,EA2IlByG,aAAe,WAAO,IAAD,EACA9F,EAAK,EAAKmE,eAAxB/E,EADc,EACdA,KAAMC,EADQ,EACRA,YACJW,EAAK,EAAKmE,eACjBtE,aAAaE,QAAQ,OAAQjB,KAAKE,UAAUgB,IAC5C,EAAK4E,eACLa,IAAQC,QAAQ,4CAAc,4BAAItG,IAAlB,MAA+BC,EAA/B,+BA9IhB,EAAKvD,MAAQ,CACXuI,UAAU,EACVE,WAAW,EACXE,cAAc,EACdI,aAAa,EACbF,gBAAgB,GAElB,EAAKI,aAAe,KACpB,EAAKC,aAAe,KACpB,EAAKb,cAAgB,KAXL,E,0CAmJlB,WAAS,IAAD,OACF4B,EAAO3H,OAAOsC,KAAKV,GADjB,EAEiEhE,KAAKF,MAAvEuI,EAFC,EAEDA,SAAUE,EAFT,EAESA,UAAWE,EAFpB,EAEoBA,aAAcI,EAFlC,EAEkCA,YAAaF,EAF/C,EAE+CA,eAEjDqB,EAAYD,EAAKE,QAAO,SAAAxE,GAAG,OAAIzB,EAAKyB,GAAKnC,UAC7C0G,EAAUE,MAAK,SAAC/G,EAAMI,GAAP,OAAgBS,EAAKb,GAAMC,KAAOY,EAAKT,GAAMH,KAAM,GAAG,KAErE,IAAI+G,EAAcJ,EAAKE,QAAO,SAAAxE,GAAG,OAAKzB,EAAKyB,GAAKnC,UAGhD,OAFA6G,EAAYD,MAAK,SAAC/G,EAAMI,GAAP,OAAgBS,EAAKb,GAAMC,KAAOY,EAAKT,GAAMH,KAAM,GAAG,KAGrE,sBAAKtE,UAAU,gBAAf,UACE,cAACsL,EAAD,CAAKC,YAAarK,KAAKoI,YACvB,qBAAKtJ,UAAU,mBAAf,SACA,eAAC,IAAD,CAAUwL,iBAAkB,CAAC,KACnBC,OAAK,EACLC,mBAAmB,QACnB1L,UAAU,mCAHpB,UAIE,cAACiJ,EAAD,CAAO0C,OAAO,SAAd,SACIT,EAAUU,KAAI,SAAAjF,GAAG,OAAI,cAACkF,EAAD,CAAkBnB,IAAK/D,EAC5BmF,OAAQ,kBAAM,EAAKtC,WAAW7C,IAC9BoF,UAAW,kBAAM,EAAKrC,cAAc/C,IACpCqF,SAAU,kBAAM,EAAKlC,aAAanD,KAHhBA,OADX,KAQ3B,cAACsC,EAAD,CAAO0C,OAAO,WAAd,SACIN,EAAYO,KAAI,SAAAjF,GAAG,OAAI,cAACkF,EAAD,CAAkBnB,IAAK/D,EAC9BmF,OAAQ,kBAAM,EAAKtC,WAAW7C,IAC9BsF,YAAa,kBAAM,EAAKrC,gBAAgBjD,IACxCqF,SAAU,kBAAM,EAAKlC,aAAanD,KAHdA,OADX,UAU/B,cAAC,IAAD,CAAQ7C,MAAM,gBACNoI,QAAS3C,EACT4C,OAAO,SACPC,KAAMlL,KAAKsJ,UACX6B,SAAUnL,KAAKoI,UACfgD,gBAAc,EACdtM,UAAU,sBANlB,SAQGkB,KAAK8I,iBAER,cAAC,IAAD,CAAQlG,MAAM,cACNoI,QAASzC,EACT0C,OAAO,SACPI,WAAW,kBACXH,KAAMlL,KAAK2J,WACXwB,SAAUnL,KAAKsI,WACf8C,gBAAc,EACdtM,UAAU,sBAPlB,SASGkB,KAAKiJ,kBAER,cAAC,IAAD,CAAQrG,MAAO,uBAAM9D,UAAU,QAAhB,UAAwB,cAACwM,EAAA,EAAD,CAAexM,UAAU,cAAjD,qBACPkM,QAASvC,EACTwC,OAAO,UACPM,OAAO,SACPL,KAAMlL,KAAK4J,cACXuB,SAAUnL,KAAKwI,cACf4C,gBAAc,EACdtM,UAAU,sBAPlB,SASGkB,KAAKmJ,qBAER,cAAC,IAAD,CAAQvG,MAAO,sBAAM9D,UAAU,QAAhB,8BACPkM,QAASrC,EACTsC,OAAO,YACPM,OAAO,UACPL,KAAMlL,KAAK6J,gBACXsB,SAAUnL,KAAK0I,gBACf0C,gBAAc,EACdtM,UAAU,sBAPlB,SASGkB,KAAKoJ,uBAER,cAAC,IAAD,CAAQxG,MAAO,uBAAM9D,UAAU,QAAhB,UAAwB,cAACwM,EAAA,EAAD,CAAexM,UAAU,cAAjD,oBACPkM,QAASnC,EACToC,OAAO,oBACPI,WAAW,cACXH,KAAMlL,KAAK8J,aACXyB,OAAO,SACPJ,SAAUnL,KAAK4I,aACf4C,kBAAmB,CAAC5J,KAAK,WACzBwJ,gBAAc,EACdtM,UAAU,sBATlB,SAWGkB,KAAKqJ,2B,GA9OwBjI,IAAMC,WAqP9C,SAAS+I,EAAT,GAA4B,IAAdC,EAAa,EAAbA,YACRzK,EAAU+B,cAId,OACE,sBAAK7C,UAAU,kBAAf,UACE,cAACoD,EAAD,CAAMV,MAAO,CAACc,OAAQ,OAAQmJ,MAAM,OAAQhJ,QAAQ,OAAQT,QAL/C,WACfpC,EAAQC,KAAR,QAKE,wCACA,cAAC6L,EAAA,EAAD,CAAc1J,QAASqI,OAM7B,SAASM,EAAOtL,GAAO,IAAD,EACC2E,EAAK3E,EAAMmK,KAAzBnG,EADa,EACbA,KAAMD,EADO,EACPA,KACTuI,EAAS3H,EAAK3E,EAAMmK,KAAK7G,OAAOE,OAC7B+H,EAA4CvL,EAA5CuL,OAAQC,EAAoCxL,EAApCwL,UAAWC,EAAyBzL,EAAzByL,SAAUC,EAAe1L,EAAf0L,YAEhCnL,EAAU+B,cAKRiK,EAAOC,EAAe,CAACjB,SAAQC,YAAWC,WAAUC,gBAE1D,OACE,sBAAKjM,UAAU,cAAckD,QAPZ,WACjBpC,EAAQC,KAAR,iBAAuBR,EAAMmK,OAM7B,UACE,sBAAK1K,UAAU,qBAAf,UACE,oBAAIA,UAAU,cAAd,SAA6BsE,IAC7B,cAAC,IAAD,CACI0I,QAASF,EACTG,QAAS,CAAC,SACVC,UAAU,cACVC,iBAAiB,mBAJrB,SAME,cAACC,EAAA,EAAD,CAAelK,QAAS,SAAAxB,GAAC,OAAIA,EAAE2L,0BAGnC,mBAAIrN,UAAU,cAAd,SAA6BuE,IAC7B,oBAAIvE,UAAU,gBAAd,UAA+B6M,EAA/B,mBAKN,IAAME,EAAiB,SAAC,GAAD,IAAEjB,EAAF,EAAEA,OAAQC,EAAV,EAAUA,UAAWC,EAArB,EAAqBA,SAAUC,EAA/B,EAA+BA,YAA/B,OACrB,eAAC,IAAD,CAAM/I,QAAS,SAACxB,GAAD,OAAOA,EAAE4L,SAASD,mBAAjC,UACE,cAAC,IAAKE,KAAN,CAAWrK,QAAS4I,EAApB,yBAGA,cAAC,IAAK0B,QAAN,IACCzB,EACI,cAAC,IAAKwB,KAAN,CAAWrK,QAAS6I,EAApB,4BAGA,cAAC,IAAKwB,KAAN,CAAWrK,QAAS+I,EAApB,8BAGL,cAAC,IAAKuB,QAAN,IACA,cAAC,IAAKD,KAAN,CAAWE,QAAM,EAACvK,QAAS8I,EAA3B,+B,6CCnTInM,I,OAAWC,IAAXD,QACAoJ,GAAUC,IAAVD,MACR,SAASyE,GAAkB9J,EAAO+J,GAChC,OAAO/J,EAAMuH,QAAO,SAAAyC,GAAI,OAAID,EAAKE,MAAK,SAAAC,GAAG,OAAIF,EAAKD,KAAKvF,SAAS0F,S,IAG5DC,G,kDACJ,WAAYxN,GAAO,IAAD,uBAChB,cAAMA,IAmBRyN,SAAW,kBAAM,EAAKzN,MAAMO,QAAQC,KAAK,MApBvB,EAqBlBkN,OAAS,kBAAM,EAAK1N,MAAM8H,MAAM6F,OAAjB,UArBG,EAsBlBC,YAAc,WACZ,IAAIzD,EAAM,EAAKuD,SACXpK,EAASqB,EAAKwF,GAAK7G,OACnBuK,EAAa,GACbT,EAAO,GAOX,OANA9J,EAAO+H,KAAI,SAAA5D,GAAK,OACdA,EAAMpE,MAAMgI,KAAI,SAAAgC,GAAI,OAClBA,EAAKD,KAAK/B,KAAI,SAAAkC,GAAG,OAAIH,EAAKG,IAAO,WAGrCxK,OAAOsC,KAAK+H,GAAM/B,KAAI,SAAAkC,GAAG,OAAIM,EAAWrN,KAAK,CAACsN,MAAMP,EAAKrD,MAAMqD,OACxDM,GAjCS,EAsClBE,aAAe,WAAO,IAAD,EACS,EAAK/N,MAA1BO,EADY,EACZA,QAASyN,EADG,EACHA,SAChB,EAAK3N,SAAS,CAAC4N,WAAW,EAAKA,aAC/B,IAAIN,EAAS,IAAI9G,gBAAgB,IACjC,EAAKoH,WAAWC,SAAQ,SAAAX,GAAG,OAAII,EAAOQ,OAAO,OAAQZ,MACrDhN,EAAQ2E,QAAR,UAAmB8I,EAAS3M,SAA5B,YAAwCsM,KA3CxB,EA8ClBS,eAAiB,SAACC,GAChB,IAAMlE,EAAM,EAAKuD,SACjB/I,EAAKwF,GAAK7G,OAASqB,EAAKwF,GAAK7G,OAAOsH,QAAO,SAAAnD,GAAK,OAAIA,EAAMtH,IAAMkO,KAChE7J,aAAaE,QAAQ,OAAQjB,KAAKE,UAAUgB,IAC5C,EAAK2J,eAlDW,EAqDlBC,OAAS,WACP,IAAMC,EAAU,EAAKZ,cACrB,OACA,sBAAKnO,UAAU,iBAAf,UACE,cAACoD,EAAD,CAAMV,MAAO,CAACc,OAAQ,OAAQmJ,MAAM,OAAQhJ,QAAQ,OAAQT,QAAS,EAAK8K,WAC1E,cAAC,IAAD,CACEgB,KAAK,OACLhP,UAAU,cACVgC,YAAY,iBACZiN,YAAY,EACZ9M,YAAU,EACViI,aAAc,EAAKoE,WACnBO,QAASA,EACTG,wBAAyB,SAACC,GACxB,EAAKC,WAAaD,EACdA,GACF,EAAKb,gBAETe,SAAU,SAAA1B,GACR,EAAKa,WAAab,EACd,EAAKyB,YACP,EAAKd,kBAIX,cAACgB,GAAA,EAAD,CAAgB5M,MAAO,CAACE,SAAU,cA9EpB,EAkFlB2M,YAAc,WACZ,IAAMxN,EAAS,mBAAG/B,UAAU,UAAb,gEACf,OACE,eAAC,IAAD,CACEA,UAAU,oBACV8D,MAAM,oBACNuI,SAAU,kBAAM,EAAKzL,SAAS,CAAC4O,eAAc,KAC7CtD,QAAS,EAAKlL,MAAMwO,cACpBlD,gBAAc,EACdmD,OAAQ,KANV,UAQE,8CACA,cAAC,GAAD,CACEzN,YAAY,mBACZG,YAAU,EACVC,YAAa,cAACC,EAAA,EAAD,IACb7B,SAAU,EAAKkP,aAEhB,EAAK1O,MAAM2O,aAAc,KAAM5N,MApGpB,EAyGlB2N,WAAa,SAACjP,GACZ,GAAY,KAARA,EAAJ,CAGA,IAAIC,EF1FD,SAAkBD,GACjBA,EAAIY,WAAW,UACjBZ,EAAM,WAAWA,GAEnB,IAAIe,EAAM,GACV,IACEA,EAAM,IAAIC,IAAIhB,GACd,MAAMiB,GAEN,OADAJ,QAAQC,IAAIG,GACL,GAGT,MAAiB,mBAAZF,EAAIG,MAAyC,eAAZH,EAAIG,MACrB,UAAhBH,EAAII,SAIF,GAHMJ,EAAIK,aAAaC,IAAI,KE4EzB8N,CAASnP,GACR,KAAPC,EACD,EAAKE,SAAS,CAAC+O,cAAc,IAG7B,EAAKpP,MAAMO,QAAQC,KAAnB,iBAAkCL,GAAM,CAACmP,MAAM,EAAK5B,aAlHtC,EAsHlB6B,iBAAmB,SAACjM,EAAQ8J,GAI1B,IAAIoC,GAFJlM,EAASA,EAAO+H,KAAI,SAAA5D,GAAK,kCAASA,GAAT,IAAgBpE,MAAM8J,GAAkB1F,EAAMpE,MAAO+J,QAC9DxC,QAAO,SAAAnD,GAAK,OAAIA,EAAMpE,MAAMG,OAAS,MACnC6H,KAAI,SAAA5D,GAAK,OAAIA,EAAMtH,MAErC,OACA,qCACE,sBAAKV,UAAU,iBAAf,iDAEG2N,EAAK/B,KAAI,SAAAoE,GAAC,OAAI,sBAAMhQ,UAAU,QAAhB,SAAiCgQ,GAAJA,SAE9C,cAAC,IAAD,CACEvE,OAAK,EACLD,iBAAkBuE,EAClBrE,mBAAmB,QACnB1L,UAAU,wBAJZ,SAOI6D,EAAO+H,KAAI,SAAA5D,GAAK,OACd,cAAC,GAAD,CAAsB2D,OAAQ3D,EAAMlE,MAApC,SACIkE,EAAMpE,MAAMgI,KAAI,SAAAgC,GAAI,OAClB,cAAC,GAAD,CAAoB1I,KAAM0I,EAAMgB,IAAK5G,EAAMtH,IAAhCkN,EAAKlN,QAFVsH,EAAMtH,aAxI1B,EAAK8N,WAAa,GAElB,IAAIyB,EAAI,EAAK1P,MAAMgO,SAAS2B,QAAU,GAElCvC,EADS,IAAIvG,gBAAgB6I,GACfE,OAAO,QANT,OAObxC,EAAK5J,OAAS,IACf,EAAKyK,WAAYb,GAGnB,EAAKyB,YAAa,EAElB,EAAKpO,MAAQ,CACXwN,WAAY,EAAKA,WACjBgB,eAAe,EACfG,cAAc,GAhBA,E,0CAuJlB,WAAS,IAAD,OACFjF,EAAMxJ,KAAKX,MAAM8H,MAAM6F,OAAjB,SACHM,EAActN,KAAKF,MAAnBwN,WACD4B,EAASlL,EAAKwF,GACd7G,EAAM,YAAOuM,EAAOvM,QAE1B,OADAA,EAAOuH,MAAK,SAACiF,EAAGC,GAAJ,OAAWD,EAAGvM,MAAQwM,EAAGxM,MAAO,GAAG,KAE7C,sBAAK9D,UAAU,eAAf,UACGkB,KAAK4N,SACN,eAAC,IAAD,CACEyB,UAAW,cAAClO,EAAA,EAAD,IADb,UAGE,cAAC,IAAWkL,KAAZ,UACE,cAAC,IAAD,CAAMiD,GAAG,IAAT,SAAa,cAACC,GAAA,EAAD,QAEf,cAAC,IAAWlD,KAAZ,UACE,cAAC,IAAD,CAAMiD,GAAG,SAAT,uBAEF,cAAC,IAAWjD,KAAZ,UACG6C,EAAO9L,UAIZ,sBAAKtE,UAAU,kBAAf,UACE,sBAAKA,UAAU,yBAAf,UACE,qBAAIA,UAAU,eAAd,UAA8BoQ,EAAO9L,KAArC,KAA6C8L,EAAO7L,QACpD,cAACqI,EAAA,EAAD,CAAc1J,QAAS,kBAAM,EAAKtC,SAAS,CAAC4O,eAAc,UAE3DhB,EAAWzK,OAAQ7C,KAAK4O,iBAAiBjM,EAAQ2K,GAC9C3K,EAAO+H,KAAI,SAAA5D,GAAK,OAAI,cAAC0I,GAAD,CAEI1I,MAAOA,EACP2I,UAAW,kBAAM,EAAKhC,eAAe3G,EAAMtH,MAFtCsH,EAAMtH,UAKxCQ,KAAKqO,qB,GA3LUjN,IAAMC,WAiMfC,eAAWuL,IAI1B,SAAS2C,GAAMnQ,GACb,IAAIyH,EAAQzH,EAAMyH,MACXtH,EAAmCsH,EAAnCtH,GAAIoD,EAA+BkE,EAA/BlE,MAAOC,EAAwBiE,EAAxBjE,OAAQI,EAAgB6D,EAAhB7D,MAAOP,EAASoE,EAATpE,MAC3BgN,EAAShN,EAAMG,OAEjBjD,EAAU+B,cAKRgO,EAAc,WAClB,IAAIC,EAAO,mBAAelN,EAAMG,OAArB,uEAEXgN,IAAMC,QAAQ,CACZlN,MAAM,gDACNgN,QAASA,EACT3E,OAAO,SACPI,WAAW,WACXE,OAAO,SACPL,KAAK7L,EAAMoQ,aAYXM,EAAI3L,KAAKW,MAAMlC,EAAS,IACxBmN,EAAInN,EAAS,GACXoN,EAAOF,EAAI,EAAJ,UAAUA,EAAV,kBAAqBC,EAArB,kBAAkCA,EAAlC,QAEb,OACE,sBAAKlR,UAAU,aAAakD,QA9BX,WACjBpC,EAAQC,KAAR,iBAAuBL,KA6BvB,UACE,sBAAKV,UAAU,oBAAf,UACE,oBAAIA,UAAU,cAAd,SAA6B8D,IAC7B,cAAC,IAAD,CACEkJ,QAhBN,cAAC,IAAD,CAAM9J,QAAS,SAACxB,GAAD,OAAOA,EAAE4L,SAASD,mBAAjC,SACE,cAAC,IAAKE,KAAN,CAAWE,QAAM,EAACvK,QAAS2N,EAA3B,8BAgBI5D,QAAS,CAAC,SACVC,UAAU,cACVC,iBAAiB,kBAJnB,SAME,cAACC,EAAA,EAAD,CAAelK,QAAS,SAAAxB,GAAC,OAAIA,EAAE2L,0BAInC,oBAAIrN,UAAU,gBAAd,UAA+B4Q,EAA/B,UAA6C,qCAA7C,IAAuDO,KACvD,qBAAK/Q,IAAK+D,EAAOnE,UAAU,YAAYK,IAAG,wBAAmByD,QASnE,SAASsN,GAAK7Q,GACZ,IAAIO,EAAU+B,cADK,EAMmBtC,EAAM2E,KAArCyI,EANY,EAMZA,KAAM0D,EANM,EAMNA,UANM,IAMKP,eANL,MAMa,GANb,EAOnB,OACE,sBAAK9Q,UAAU,YAAf,UACI,qBAAKA,UAAU,WAAf,SACE,qBAAKA,UAAU,UAAUkD,QAAS,kBARrB6C,EAQqCsL,OANxDvQ,EAAQC,KAAR,iBAAuBR,EAAMqO,IAA7B,cAAsC7I,IAFpB,IAACA,GAQb,SAA+DD,EAASuL,OAE1E,qBAAKrR,UAAU,eAAf,SACG8Q,IAEH,qBAAK9Q,UAAU,YAAf,SACG2N,EAAK/B,KAAI,SAAAkC,GAAG,OAAI,sBAAK9N,UAAU,WAAf,cAAsC8N,IAAPA,W,oFCnRlDwD,I,OAAaxR,IAAbwR,UAkDR,SAASC,GAAe3C,GACtB,IAAIlE,EAAY8G,GAAQ,EACxB,IAAI9G,KAAOxF,EAET,GADQA,EAAKwF,GAAK7G,OAAO4N,MAAK,SAAAzJ,GAAK,OAAIA,EAAMtH,KAAOkO,KACzC,CACT4C,GAAQ,EACR,MAGJ,OAAIA,EACK,aAAC9G,OAAQxF,EAAKwF,IAEhB,CAACA,IAAI,gBAuBd,SAASyD,GAAYzD,GACnB,IAAI7G,EAASqB,EAAKwF,GAAK7G,OACnBuK,EAAa,GACbT,EAAO,GAOX,OANA9J,EAAO+H,KAAI,SAAA5D,GAAK,OACdA,EAAMpE,MAAMgI,KAAI,SAAAgC,GAAI,OAClBA,EAAKD,KAAK/B,KAAI,SAAAkC,GAAG,OAAIH,EAAKG,IAAO,WAGrCxK,OAAOsC,KAAK+H,GAAM/B,KAAI,SAAAkC,GAAG,OAAIM,EAAWrN,KAAK,CAACsN,MAAMP,EAAKrD,MAAMqD,OACxDM,E,IAgBHsD,G,kDACJ,WAAYnR,GAAO,IAAD,8BAChB,cAAMA,IAeRyN,SAAW,kBAAM,EAAKzN,MAAMO,QAAQC,KAAK,MAhBvB,EAkBlBJ,WAAa,kBAAM,EAAKJ,MAAM8H,MAAM6F,OAAjB,SAlBD,EAoBlBY,OAAS,WAAO,IAEVC,EAAUZ,GADFoD,GAAe,EAAK5Q,cAA3B+J,KAEL,OACA,sBAAK1K,UAAU,YAAf,UACE,cAACoD,EAAD,CAAMV,MAAO,CAACc,OAAQ,OAAQmJ,MAAM,OAAQhJ,QAAQ,OAAQT,QAAS,EAAK8K,WAC1E,sBAAKhO,UAAU,gBAAf,UACE,cAAC,IAAD,CACEgP,KAAK,OACLhP,UAAU,yBACVgC,YAAY,iBACZiN,YAAY,EACZ9M,YAAU,EACV4M,QAASA,EACTG,wBAAyB,SAACC,GACxB,EAAKC,WAAaD,EACdA,GAAM,EAAKb,gBAEjBe,SAAU,SAAC1B,GACT,EAAKa,WAAab,EACd,EAAKyB,YAAY,EAAKd,kBAI9B,cAACgB,GAAA,EAAD,CAAgB5M,MAAO,CAACE,SAAU,iBA5CtB,EAiDlB0L,aAAe,WACb,EAAK1N,SAAS,CAACsP,OAAO,EAAK1B,cAlDX,EAmFlBmD,cAAgB,SAACC,GACf,EAAKhR,SAAS,CAACiR,YAAaD,KApFZ,EAuFlBE,aAAe,SAACC,EAAQC,GACtB,GAAGD,EAAO,CACR,IAAInO,EAAQ,EAAK5C,MAAMiR,eAAerO,MAClCsO,EAAItO,EAAMuO,WAAU,SAAAvE,GAAI,OAAIA,EAAKlN,KAAOsR,EAAMtR,MAClDkD,EAAMsO,GAAKF,EACXpO,EAAMwH,MAAK,SAACgH,EAAIC,GAAL,OAAYD,EAAGf,UAAYgB,EAAGhB,aASzCtM,aAAaE,QAAQ,OAAQjB,KAAKE,UAAUgB,IAE9C,EAAKtE,SAAS,CAACiR,YAAY,KAAMS,SAAQ,IACrCP,GACFpH,IAAQC,QAAR,gBAAyB9E,EAASkM,EAAMX,WAAxC,4BAzGc,EA4GlBkB,cAAgB,SAACX,GACf,IAAIY,EAAU,EAAKxR,MAAMiR,eACrBrO,EAAQ4O,EAAQ5O,MAAMuH,QAAO,SAAAyC,GAAI,OAAIA,EAAKlN,KAAOkR,KACjDa,EAAU,2BAAOD,GAAP,IAAgB5O,MAAMA,KA5HxC,SAA0BiF,GACxB,IAAIuH,EAASmB,GAAe1I,EAAanI,IACrCgS,EAAStC,EAAOvM,OAAOsO,WAAU,SAACnK,GAAD,OAAWA,EAAMtH,IAAMmI,EAAanI,MACzE0P,EAAOvM,OAAO6O,GAAU7J,EACxB9D,aAAaE,QAAQ,OAAQjB,KAAKE,UAAUgB,IAyH1CyN,CAAiBF,GACjB,EAAK7R,SAAS,CAACqR,eAAgBQ,EAAYH,SAAQ,EAAOT,YAAY,OACtElH,IAAQC,QAAQ,+BAlHA,EAqHlBgI,YAAc,WACZ,IAAIlS,EAAK,OAAS2E,IAEdiN,EAAU,CAAC5R,KAAI2Q,UADH/L,KAAKuN,MAAMC,SAASC,cAAc,QAAQC,aAC5BlC,QAAQ,GAAInD,KAAK,IAC3C/J,EAAQ,EAAK5C,MAAMiR,eAAerO,MACtCA,EAAM7C,KAAKuR,GACX1O,EAAMwH,MAAK,SAACgH,EAAIC,GAAL,OAAYD,EAAGf,UAAYgB,EAAGhB,aACzCtM,aAAaE,QAAQ,OAAQjB,KAAKE,UAAUgB,IAC5C,EAAKtE,SAAS,CAACiR,YAAYnR,EAAIuS,QAAO,EAAOX,SAAQ,IACrDQ,SAASC,cAAc,QAAQG,SA9Hf,EAiIlBC,iBAAmB,WAEjB,IAAIC,EAAS7B,GAAe,EAAK5Q,cAAc+J,IAC3C2I,EAAS,EAAKC,UAAUzD,MACzBwD,GAAWA,IAAUD,IAEtBlO,EAAKkO,GAAQvP,OAASqB,EAAKkO,GAAQvP,OAAOsH,QAAO,SAAAoI,GAAC,OACVA,EAAE7S,KAAO,EAAKC,gBAGtDuE,EAAKmO,GAAQxP,OAAO2P,QAAQ,EAAKxS,MAAMiR,gBACvClN,aAAaE,QAAQ,OAAQjB,KAAKE,UAAUgB,KAE3C,EAAKoO,UAAUxP,QAGhB,EAAK9C,MAAMiR,eAAenO,MAAQ,EAAKwP,UAAUxP,MACjDiB,aAAaE,QAAQ,OAAQjB,KAAKE,UAAUgB,KAG9C,EAAKtE,SAAS,CAAC6S,gBAAe,IAC9B,EAAKH,UAAY,IAtJD,EAyJlBI,cAAgB,WACd,IAAIC,EAhMR,WAGE,IAFA,IACIA,EAAO,GACX,MAFarQ,OAAOsC,KAAKV,GAEzB,eAAoB,CAAhB,IAAIwF,EAAG,KACL2D,EAAK,UAAMnJ,EAAKwF,GAAKpG,KAAhB,cAA0BY,EAAKwF,GAAKnG,MAC7CoP,EAAK5S,KAAK,CAAC0J,MAAMC,EAAK2D,MAAMA,IAE9B,OAAOsF,EAyLMC,GACNlJ,EAAO6G,GAAe,EAAK5Q,cAA3B+J,IAEL,OACE,cAAC,IAAD,CACE5G,MAAM,uBACNoI,QAAS,EAAKlL,MAAMyS,eACpBtH,OAAO,SACPI,WAAW,kBACXF,SAAU,WACR,EAAKzL,SAAS,CAAC6S,gBAAe,IAC9B,EAAKH,UAAY,IAEnBlH,KAAM,EAAK+G,iBACX7G,gBAAc,EACdtM,UAAU,qBAXZ,SAaE,sBAAKA,UAAU,oBAAf,UACE,mBAAGA,UAAU,QAAb,mBACA,cAAC,IAAD,CAAQgC,YAAY,gBACZhC,UAAU,cACVoK,aAAc,EAAKpJ,MAAMiR,eAAenO,MACxCuL,SAAU,SAAC3N,GAAD,OAAO,EAAK4R,UAAUxP,MAAQpC,EAAEmS,OAAOpJ,SACzD,mBAAGzK,UAAU,QAAb,oBACA,cAAC,IAAD,CACEoK,aAAcM,EACdqE,QAAS4E,EACTtE,SAAU,SAAC3E,GAAD,OAAS,EAAK4I,UAAUzD,MAAQnF,WArLlC,EA4LlBoJ,YAAc,WACZ,OACA,eAAC,IAAD,CAAM5Q,QAAS,SAACxB,GAAD,OAAOA,EAAE4L,SAASD,mBAAjC,UACE,cAAC,IAAKE,KAAN,CAAWrK,QAAS,kBAAM,EAAKtC,SAAS,CAAC6S,gBAAgB,EAAMH,UAAW,MAA1E,0BAGA,cAAC,IAAK/F,KAAN,CAAWE,QAAM,EAACvK,QAAS,EAAK2N,YAAhC,gCAlMc,EAwMlBA,YAAc,WACZ,IAAIjN,EAAQ,EAAK5C,MAAMiR,eAAerO,MAClCkN,EAAO,mBAAelN,EAAMG,OAArB,uEAEXgN,IAAMC,QAAQ,CACZlN,MAAM,gDACNgN,QAASA,EACT3E,OAAO,SACPI,WAAW,WACXE,OAAO,SACPL,KAAM,EAAK2H,iBAlNG,EAsNlBA,cAAgB,WACd,IAAIvB,EAAU,EAAKxR,MAAMiR,eACnBvH,EAAM6G,GAAeiB,EAAQ9R,IAAIgK,IACvCxF,EAAKwF,GAAK7G,OAASqB,EAAKwF,GAAK7G,OAAOsH,QAAO,SAAAnD,GAAK,OAAIA,EAAMtH,IAAM8R,EAAQ9R,MACxEqE,aAAaE,QAAQ,OAAQjB,KAAKE,UAAUgB,IAC5CyF,IAAQC,QAAR,mBAA4B4H,EAAQ1O,MAApC,wBACG,EAAKvD,MAAMO,QAAQiD,QAAUqB,EAG9B,EAAK7E,MAAMO,QAAQ2E,QAAQ,KAI3B,EAAKlF,MAAMO,QAAQkT,UAnOL,EAsOlBC,cAAgB,kBAAM,cAAC,KAAD,CAAUzP,QAAM,KApOpC,EAAKxD,MAAQ,CACXkT,UAAW,GACXjC,eAAgB,GAChBJ,YAAa,KACbS,SAAS,EACTmB,gBAAgB,EAChBvD,OAAO,GACP+C,QAAQ,GAEV,EAAKK,UAAY,GACjB,EAAK9E,WAAa,GAClB,EAAKY,YAAa,EAbF,E,qDAqDlB,WAAqB,IAAD,OACZR,EAAM1N,KAAKP,aAEb6R,EAlIR,SAAyB5D,GACvB,IAAIlE,EAAK1C,EAAOwJ,GAAQ,EACxB,IAAI9G,KAAOxF,EAET,GADA8C,EAAQ9C,EAAKwF,GAAK7G,OAAO4N,MAAK,SAAAzJ,GAAK,OAAIA,EAAMtH,KAAOkO,KACzC,CACT4C,GAAQ,EACR,MAGJ,OAAOA,EAAOxJ,EAAQ,GAyHNmM,CAAgBvF,IH7H3B,SAAP,mCGgIIwF,CAAaxF,GAAKyF,MAAK,SAAAzL,GACrB,GAAGlD,EAAQ8M,GAAS,CAAC,IAAD,EAEdzO,GHhLasC,EGgLKiO,SAAS1L,EAAG,mBAAyB,EH/K1DtD,KAAKuN,MAAMxM,EAAG,MGgLfmM,EAAU,CAAC9R,GAAGkO,EAAK9K,MAAM8E,EAAI9E,MAAOF,MAAM,GAAIO,MAAMyE,EAAIG,UAAWhF,UACnE,IAAI2G,GAAM,YAAKnK,MAAMgO,SAASvN,aAApB,eAA2B6O,QAAS,gBA9GtD,SAA0BnF,EAAKuH,GAG7B/M,EAAKwF,GAAK7G,OAAO2P,QAAQvB,GACzBlN,aAAaE,QAAQ,OAAQjB,KAAKE,UAAUgB,IA2GtCqP,CAAiB7J,EAAK8H,GAEtB7H,IAAQC,QAAQ,CACZ4J,SAAS,EACT1D,QAAQ,gCAAD,OAAiC5L,EAAKwF,GAAKnG,KAA3C,KACPkQ,IAAI,MHxLT,IAAkBpO,EG2LnB,EAAKzF,SAAS,CAACsT,UAAUtL,EAAKqJ,eAAeO,OAC5CkC,OAAM,SAAAhT,GACPqP,IAAMlQ,MAAM,CACViD,MAAMpC,EACNyK,OAAO,OACPC,KAAK,EAAK7L,MAAMO,QAAQkT,c,oBA0J9B,WAAS,IAAD,SAEyC9S,KAAKF,MAD9CiR,EADA,EACAA,eAA2BzQ,EAD3B,EACgB0S,UAAW1S,IAAMiS,EADjC,EACiCA,eACjC5B,EAFA,EAEAA,YAAaoB,EAFb,EAEaA,OAAQ/C,EAFrB,EAEqBA,OAAQoC,EAF7B,EAE6BA,QAC7B1D,EAAM1N,KAAKP,aACXgU,EAAUjP,EAAQuM,GACpB7B,EAASmB,GAAe3C,GACxBhL,EAAQqO,EAAerO,MACxBsM,EAAOnM,OAAO,IACfH,EAAQA,EAAMuH,QAAO,SAAAyC,GAAI,OArP/B,SAAoBA,EAAMD,GACxB,OAAOA,EAAKE,MAAK,SAAAC,GAAG,OAAIF,EAAKD,KAAKvF,SAAS0F,MAoPV8G,CAAWhH,EAAKsC,OAG/C,IAAM2E,IAAYhD,GAAe3B,EAAOnM,OAAS,GACjD,OACE,sBAAK/D,UAAU,cAAf,UACGkB,KAAK4N,SACN,cAAC,GAAD,CAAatN,IAAKA,EAAKyR,OAAQA,IAC9B0B,EAASzT,KAAK+S,gBACd,qCACD,sBAAKjU,UAAU,wBAAf,UACE,sBAAKA,UAAU,kBAAf,UACE,gCACE,oBAAIA,UAAU,gBAAd,SAA+BiS,EAAenO,QAC9C,cAAC,IAAD,CAAM0M,GAAE,iBAAYJ,EAAO1F,KAA3B,SACE,uBAAM1K,UAAU,iBAAhB,UACGoQ,EAAO9L,KADV,IACgB,qCADhB,IAC0B8L,EAAO7L,KAC/B,cAACuQ,GAAA,EAAD,CAAoBpS,MAAO,CAACE,SAAS,OAAQmS,YAAY,iBAI/D,cAAC,IAAD,CACE/H,QAAS9L,KAAK4S,cACd7G,QAAS,CAAC,SACVC,UAAU,cACVC,iBAAiB,GAJnB,SAME,cAACC,EAAA,EAAD,CAAelK,QAAS,SAAAxB,GAAC,OAAIA,EAAE2L,uBAEhCnM,KAAKwS,mBAER,cAAC,IAAD,CACEsB,QAAOnD,IAAe4B,GACtB9I,QAAS,SAAAsK,GAAC,MAAI,iEAGd/E,EAAOnM,OAAS,EAAG,sBAAK/D,UAAU,iBAAf,iDACX,mBAAG0C,MAAO,CAACwS,OAAQ,SAAnB,SAA8BhF,EAAOtE,KAAI,SAAAoE,GAAC,OAAI,sBAAMhQ,UAAU,QAAhB,SAAiCgQ,GAAJA,QAC/E,sBAAMtN,MAAO,CAACyS,MAAM,QAApB,sEAEF,KAEJ,qBAAKnV,UAAU,kBAAf,SACG4D,EAAMgI,KAAI,SAAAgC,GAAI,OACT,cAAC,GAAD,CAEE1I,KAAM0I,EACNgB,IAAKA,EACLwG,SAAUvD,GAAejE,EAAKlN,GAC9BmU,SAAUA,EACVvC,QAASA,EACT+C,UAAW,kBAAM,EAAK1D,cAAc/D,EAAKlN,KACzCiQ,UAAW,kBAAM,EAAK4B,cAAc3E,EAAKlN,KACzC4U,SAAU,EAAKxD,cARVlE,EAAKlN,YAatB,sBAAKV,UAAU,eAAf,UACE,qBAAKA,UAAU,YAAf,SACC6U,EAAU,cAACjI,EAAA,EAAD,CAAc1J,QAAShC,KAAK0R,YAAalQ,MAAO,CAAC6S,YAAY,UAAa,OAErF,qBAAKvV,UAAU,aAAf,SACEiT,EAAQ,cAACuC,GAAA,EAAD,CAAetS,QAAS,kBAAM,EAAKtC,SAAS,CAACqS,QAAO,OACpD,cAACwC,GAAA,EAAD,CAAiBvS,QAAS,kBAAM,EAAKtC,SAAS,CAACqS,QAAO,sB,GAjTjD3Q,IAAMC,WA0ThBC,eAAWkP,IAGpBN,G,kDACJ,WAAY7Q,GAAO,IAAD,8BAChB,cAAMA,IAeRmV,YAAc,SAAC3P,GAEb+M,SAASC,cAAc,QAAQC,YAAcjN,GAlB7B,EAqBlBsP,UAAY,WACV,EAAK9U,MAAM8U,aAtBK,EAwBlBxE,YAAc,WACZE,IAAMC,QAAQ,CACZlN,MAAM,6CACNqI,OAAO,SACPI,WAAW,WACXE,OAAO,SACPL,KAAK,EAAK7L,MAAMoQ,aA9BF,EAqClBmD,YAAc,kBACZ,eAAC,IAAD,CAAM5Q,QAAS,SAACxB,GAAD,OAAOA,EAAE4L,SAASD,mBAAjC,UACE,cAAC,IAAKE,KAAN,CAAWrK,QAAS,EAAK3C,MAAM8U,UAA/B,uBAGA,cAAC,IAAK7H,QAAN,IACA,cAAC,IAAKD,KAAN,CAAWE,QAAM,EAACvK,QAAS,EAAK2N,YAAhC,6BA3Cc,EAiDlB8E,OAAS,SAAC5D,GACR,GAAGA,EAAO,CACR,IAAIO,EAAO,2BAAO,EAAK/R,MAAM2E,MAAS,EAAK0Q,UAC3C,EAAKrV,MAAM+U,SAASvD,EAAQO,QAEtB,EAAK/R,MAAM+R,QAGjB,EAAK/R,MAAMoQ,YAGX,EAAKpQ,MAAM+U,SAASvD,EAAQ,MAE9B,EAAK6D,SAAW,IA9DA,EAiElBC,YAAc,SAACZ,EAAGa,GAAJ,OAAgB,EAAKF,SAASvE,UH9dvC,SAAkB0E,GACvB,IAAI5E,EAAO4E,EAAI9O,MAAM,KAAK2E,KAAI,SAAAlK,GAAC,OAAI4S,SAAS5S,MAE5C,OADyB,GAAfyP,EAAKpN,OAAqB,KAARoN,EAAK,GAAkB,GAARA,EAAK,GAAQA,EAAK,GAAa,GAARA,EAAK,GAAQA,EAAK,GG4d5B6E,CAASF,IAjE/C,EAkElBG,eAAiB,SAACvU,GAAD,OAAO,EAAKkU,SAAS9E,QAAUpP,EAAEmS,OAAOpJ,OAlEvC,EAoElByL,YAAc,WAAO,IAAD,EACe,EAAK3V,MAAM2E,KAAvCmM,EADa,EACbA,UAAWP,EADE,EACFA,QAASnD,EADP,EACOA,KACnBwI,EAAQ,EAAK5V,MAAM+R,QAGrB8D,EAAa/E,GAAa,KAAO,WAAa,QAC9CgF,EAAcC,KAAOxQ,EAASuL,GAAY+E,GAE1CG,EACI,gCACE,cAAC,IAAD,CAAQ9I,QAAM,EAACvK,QAAS,kBAAI,EAAKyS,QAAO,IAAQjT,MAAO,CAAC6S,YAAa,QAArE,qBAGA,cAAC,IAAD,CAAQzS,KAAK,UAAUI,QAAS,kBAAI,EAAKyS,QAAO,IAAhD,SACGQ,EAAO,SAAU,YAM1BpH,EAAUZ,GADFoD,GAAe,EAAKhR,MAAMqO,KAAjClE,KAGL,OACA,qCACE,sBAAK1K,UAAU,gBAAf,UACE,cAAC,KAAD,CAAYoK,aAAciM,EAAaG,OAAQJ,EACnCK,SAAS,EAAOpH,SAAU,EAAKwG,cAE1CU,KAEH,qBAAKvW,UAAU,oBAAf,SACE,cAACsR,GAAD,CAAUoF,KAAM,EAAGtM,aAAc0G,GAAgB,GAAIzB,SAAU,EAAK4G,mBAEtE,sBAAKjW,UAAU,iBAAf,UACE,cAAC,IAAD,CACEgP,KAAK,OACLhP,UAAU,YACVgC,YAAY,WACZiN,YAAY,EACZF,QAASA,EACT3E,aAAcuD,EACd0B,SAAU,SAAC1B,GAAD,OAAU,EAAKiI,SAASjI,KAAOA,KAG3C,cAACf,EAAA,EAAD,WA9GJ,EAAKgJ,SAAW,GAChB,EAAKhI,KAAOtL,IAAMqU,YAHF,E,sDAMlB,SAAmBC,GACdA,EAAOxB,UAAYlU,KAAKX,MAAM6U,UAC/BlU,KAAK0M,KAAKiJ,QAAQC,eAAe,CAACC,SAAS,SAAUC,MAAM,a,+BAG/D,WAC4B,GAAvB9V,KAAKX,MAAM6U,UACZlU,KAAK0M,KAAKiJ,QAAQC,eAAe,CAACC,SAAS,SAAUC,MAAM,a,oBAyG/D,WAAS,IAAD,SAGuB9V,KAAKX,MAA3B6U,EAHD,EAGCA,SAAUP,EAHX,EAGWA,SAHX,EAIgC3T,KAAKX,MAAM2E,KAA1CyI,EAJD,EAICA,KAAM0D,EAJP,EAIOA,UAJP,IAIkBP,eAJlB,MAI0B,GAJ1B,EAMN,OACE,qBAAK9Q,UAAU,YAAYiC,IAAKf,KAAK0M,KAArC,SACGwH,EAAUlU,KAAKgV,cACf,qCACC,sBAAKlW,UAAU,WAAf,UACE,qBAAKA,UAAU,UAAUkD,QAAS,kBAAI,EAAKwS,YAAYrE,IAAvD,SAAoEvL,EAASuL,KAC7E,qBAAKrR,UAAU,YAAY0C,MAAOmS,EAAU,GAAI,CAAClS,QAAQ,QAAzD,SACE,cAAC,IAAD,CACEqK,QAAS9L,KAAK4S,cACd7G,QAAS,CAAC,SACVC,UAAU,cACVC,iBAAiB,iBAJnB,SAME,cAACC,EAAA,EAAD,CAAelK,QAAS,SAAAxB,GAAC,OAAIA,EAAE2L,4BAIrC,qBAAKrN,UAAU,eAAf,SACG8Q,IAEH,qBAAK9Q,UAAU,YAAf,SACG2N,EAAK/B,KAAI,SAAAkC,GAAG,OAAI,sBAAK9N,UAAU,WAAf,cAAsC8N,IAAPA,iB,GAlJzCxL,IAAMC,WA4JnB0U,G,kDACJ,WAAY1W,GAAO,IAAD,8BAChB,cAAMA,IAqCR2W,YAAc,WACZ,IAAIhJ,EAAS,IAAI9G,gBAAgBjC,OAAOoJ,SAAS2B,QAC7CiB,EAAO,EACY,MAAnBjD,EAAOpM,IAAI,OAAcqP,EAAOmD,SAASpG,EAAOpM,IAAI,OACxD,IAAM1B,EAAM,EAAKG,MAAMiB,KAAO,GACxBgC,EAAM,UAAM,EAAKxC,MAAM2L,OAAS,EAAE,IAA5B,MACZ,OAAO,uBAAOjM,GAAG,MAAMyW,UAAQ,EAACC,UAAQ,EAAChX,IAAG,UAAKA,EAAL,cAAc+Q,GAAQzO,MAAO,CAACc,aA5C1D,EA+ClByQ,cAAgB,WACd,OAAO,cAAC,KAAD,CAAMoD,IAAI,gBA9CjB,EAAKC,OAAShV,IAAMqU,YACpB,EAAK3V,MAAQ,CAACgH,MAAM,KAAM2E,MAAM,MAHhB,E,wDAMlB,kBACSzL,KAAKqW,W,qBAGd,c,uBAGA,c,kBAGA,c,kBAEA,SAAK5O,M,+BAIL,WAAqB,IAAD,SAElBzH,KAAKqW,SAAW,IAAIC,gBAAe,WACjC,IAAIC,EAAK,EAAKH,OAAOT,QAClBY,GAAOA,EAAGC,aAAe,EAAK1W,MAAM2L,OACrC,EAAK/L,SAAS,CAAC+L,MAAO,EAAK2K,OAAOT,QAAQa,iBAG9CxW,KAAKqW,SAASI,QAAQzW,KAAKoW,OAAOT,SAGlC3V,KAAKN,SAAS,CACV+L,MAAK,UAAEzL,KAAKoW,OAAOT,eAAd,aAAE,EAAqBa,gB,oBAiBlC,WAAS,IACC/K,EAAUzL,KAAKF,MAAf2L,MADF,EAEkBzL,KAAKX,MAArBiB,EAFF,EAEEA,IAAKyR,EAFP,EAEOA,OACPnC,EAAUtP,EAAKN,KAAKgW,cAAgBhW,KAAK+S,gBACzCzQ,EAAM,UAAMtC,KAAKF,MAAM2L,OAAS,EAAE,IAA5B,MACNiL,EAAY3E,EAAQ,sBAAwB,eAClD,OACE,qBAAKjT,UAAW4X,EAAW3V,IAAKf,KAAKoW,OAArC,SACG3K,GACD,qBAAK3M,UAAU,kBAAkB0C,MAAO,CAACc,UAAzC,SACGsN,U,GA9DexO,IAAMC,W,OCrkBjB,SAASsV,KACtB,OACE,cAAC,IAAD,UACE,qBAAK7X,UAAU,YAAf,SAEE,eAAC,IAAD,WAEE,cAAC,IAAD,CAAOiI,OAAK,EAAC6P,KAAK,IAAlB,SACE,cAAC,EAAD,MAIF,cAAC,IAAD,CAAO7P,OAAK,EAAC6P,KAAK,SAAlB,SACE,cAAC,EAAD,MAIF,cAAC,IAAD,CAAO7P,OAAK,EAAC6P,KAAK,mBAAlB,SACE,cAAC,GAAD,MAIF,cAAC,IAAD,CAAOA,KAAK,4BAAZ,SACE,cAACC,GAAD,MAIF,cAAC,IAAD,CAAOD,KAAK,kBAAZ,SACE,cAAC,GAAD,MAIF,cAAC,IAAD,CAAOA,KAAK,SAAZ,SACE,cAACE,GAAD,MAIF,cAAC,IAAD,CAAOF,KAAK,IAAZ,SACE,cAACG,GAAD,aAqBZ,SAASD,KACP,OAAO,uCAGT,SAASC,KACP,OAAO,qCAmCT,SAASF,KAAe,IAAD,EACOG,cAAtBC,EADe,EACfA,SAAUC,EADK,EACLA,QAChB,OACE,qCACA,gEAAmCA,EAAnC,gBAAyDD,EAAzD,OACA,+BACE,yCACA,yCACA,+CCrHNE,IAASC,OACL,cAAC,GAAD,IACFxF,SAASyF,eAAe,W","file":"static/js/main.00eea3a7.chunk.js","sourcesContent":["import React from \"react\";\nimport { withRouter, useHistory } from \"react-router-dom\";\nimport { Input, Button } from 'antd';\nimport { CaretRightOutlined } from '@ant-design/icons';\n\nimport \"./Home.css\"\n\nconst { Search } = Input;\n\nexport default function Home() {\n  return (\n    <div className=\"home-shell\">\n      <div className=\"home-content\">\n        <NameLogo />\n        <VideoLink />\n        <p className=\"or-seperator\">OR</p>\n        <NotesLink />\n      </div>\n    </div>\n  )\n}\n\nfunction NameLogo(){\n  return (\n    <div className=\"logo-panel\">\n        <h1>FlowNotes</h1>\n        <img src=\"/logo192.png\" alt=\"FlowNotes Logo\"/>\n    </div>\n  )\n}\n\nclass _VideoLink extends React.Component {\n  constructor(props){\n    super(props)\n    this.state = {error:false}\n    this.inputRef = null\n  }\n\n  componentDidMount(){\n    this.inputRef.focus({\n      cursor: 'end',\n    });\n  }\n\n  onSearch = val => {\n    if (val === \"\") {\n      return\n    }\n    let id = this.getVideoId(val)\n    if(id === \"\") {\n      this.setState({error: true})\n    }\n    else{\n      this.props.history.push(`/video/${id}`)\n    }\n  }\n\n  getVideoId(val){\n    if(!val.startsWith(\"http\")){\n      val = \"https://\"+val\n      console.log(val)\n    }\n    let url = \"\"\n    try {\n      url = new URL(val)\n    } catch(e) {\n      console.log(e)\n      return \"\"\n    }\n  \n    if ((url.host == \"www.youtube.com\" || url.host == \"youtube.com\") && \n        (url.pathname == \"/watch\")){\n          return url.searchParams.get(\"v\")\n    }\n    // should I also confirm url isn't a 404?\n    return \"\"\n  }\n\n  render(){\n    const errMsg = <p className=\"err-msg\">Please ensure that the URL is formatted correctly!</p>\n    return (\n        <div className=\"video-link-form\">\n            <h2>Video Link</h2>\n            <p>To start or continue taking notes on a video.</p>\n            <Search\n              placeholder=\"Enter video link\"\n              ref={input =>  this.inputRef = input }\n              allowClear\n              enterButton={<CaretRightOutlined />}\n              onSearch={this.onSearch}\n            />\n            {this.state.error? errMsg : null}\n        </div>\n    )\n  }\n}\n\nconst VideoLink = withRouter(_VideoLink);\n\n\nfunction NotesLink(){\n  const icon = <CaretRightOutlined style={{display:\"flex\", fontSize:\"22px\"}}/>\n  const btnStyle = {display:\"flex\", alignItems:\"center\"}\n  let history = useHistory()\n\n  const toNotesManager = ev => {\n    history.push(\"/notes\")\n  }\n  return (\n    <div className=\"notes-link\">\n        <Button\n          type=\"primary\"\n          size=\"large\"\n          shape=\"round\"\n          style={btnStyle}\n          onClick={toNotesManager}\n          >\n            Notes Manager {icon}\n        </Button>\n        <p>To view your previous notes</p>\n    </div>\n  )\n}","import React from \"react\";\n\n\nexport default function Logo(props){\n  const clicked = props.onClick\n  let style = props.style || {}\n  style = Object.assign({\n                          height:\"100px\",\n                          background:\"#1f1f1f\",\n                          borderRadius:\"20%\",\n                          padding: \"7px\",\n                          cursor: \"pointer\"\n                        }, style)\n  return (\n    <img className=\"logo\"\n         src=\"/logo192.png\"\n         alt=\"FlowNotes Logo\"\n         style={style}\n         onClick={clicked}\n    />\n  )\n}","let notes = [\n  {\n    \"id\":\"nid1\",\n    \"timestamp\":190,\n    \"content\":\"Test content\",\n    \"tags\":[ \"git\", \"html\", \"vcs\"]\n  },\n  {\n    \"id\":\"nid2\",\n    \"timestamp\":255,\n    \"content\":\"Test content\",\n    \"tags\":[ \"exam\", \"logistics\"]\n  },\n  {\n    \"id\":\"nid3\",\n    \"timestamp\":441,\n    \"content\":\"Test content\",\n    \"tags\":[\"web\",\"animation\",\"git\"]\n  },\n  {\n    \"id\":\"nid4\",\n    \"timestamp\":590,\n    \"content\":\"Test content\",\n    \"tags\":[\"css\",\"js\",\"design\"]\n  },\n  {\n    \"id\":\"nid5\",\n    \"timestamp\":681,\n    \"content\":\"Test content\",\n    \"tags\":[\"exam\"]\n  },\n  {\n    \"id\":\"nid6\",\n    \"timestamp\":1220,\n    \"content\":\"Test content\",\n    \"tags\":[\"web\",\"html\",\"js\"]\n  },\n  {\n    \"id\":\"nid7\",\n    \"timestamp\":1554,\n    \"content\":\"Test content\",\n    \"tags\":[\"design\",\"web\",\"exam\"]\n  }\n]\n\nlet videos = [\n  {\n    id : \"90QvQ3p6brk\",\n    title: \"L15 - Web animation in practice\",\n    length: 48, //in min\n    notes: JSON.parse(JSON.stringify(notes)),\n    image: \"/thumbnails/th1.jpg\"\n  },\n  {\n    id : \"LzELw8k1FEY\",\n    title: \"L14 - CSS and easing functions\",\n    length: 51, //in min\n    notes: JSON.parse(JSON.stringify(notes)),\n    image: \"/thumbnails/th2.jpg\"\n  },\n  {\n    id : \"eRcAf69IdCk\",\n    title: \"L13 - Understading CSS animations\",\n    length: 48, //in min\n    notes: JSON.parse(JSON.stringify(notes)),\n    image: \"/thumbnails/th3.jpg\"\n  },\n  {\n    id : \"TVpGb5Jj0GY\",\n    title: \"L12 - JS vs CSS animation\",\n    length: 56, //in min\n    notes: JSON.parse(JSON.stringify(notes)),\n    image: \"/thumbnails/th4.jpg\"\n  },\n  {\n    id : \"kzvt3g8pUHQ\",\n    title: \"L11 - Animation to convey context\",\n    length: 43, //in min\n    notes: JSON.parse(JSON.stringify(notes)),\n    image: \"/thumbnails/th5.jpg\"\n  },\n  {\n    id : \"4NKaIclN2fk\",\n    title: \"L10 - Intro to animation on the web\",\n    length: 58, //in min\n    notes: JSON.parse(JSON.stringify(notes)),\n    image: \"/thumbnails/th6.jpg\"\n  },\n]\n\nlet _data = {\n  cid1 : {\n    code: \"CSE 110\",\n    name: \"Web design\",\n    active: true,\n    videos: JSON.parse(JSON.stringify(videos))\n  },\n  cid2 : {\n    code: \"CSE 141\",\n    name: \"Introduction to Computer Architecture\",\n    active: true,\n    videos: JSON.parse(JSON.stringify(videos))\n  },\n  cid3 : {\n    code: \"CSE 121\",\n    name: \"Systems Design\",\n    active: true,\n    videos: JSON.parse(JSON.stringify(videos))\n  },\n  cid4 : {\n    code: \"CSE 101\",\n    name: \"Computational Thinking\",\n    active: true,\n    videos: JSON.parse(JSON.stringify(videos))\n  },\n  cid5 : {\n    code: \"CSE 100\",\n    name: \"Basic CS stuff\",\n    active: false,\n    videos: JSON.parse(JSON.stringify(videos))\n  },\n  cid6 : {\n    code: \"CSE 111\",\n    name: \"Web design and development\",\n    active: false,\n    videos: JSON.parse(JSON.stringify(videos))\n  },\n  unclassified : {\n    code: \"Unclassified\",\n    name: \"unclassified\",\n    active: true,\n    videos: []\n  }\n}\n\n// if LS is not set, set it to this default\nif(!localStorage.getItem(\"data\")){\n  localStorage.setItem(\"data\", JSON.stringify(_data))\n}\n// and initialise data to LS data\nlet data = JSON.parse(localStorage.getItem(\"data\"))\nwindow.data = data\n\nexport default data","export const historyLen = window.history.length\n\nexport function randstr(){\n    return Math.random().toString(36).replace('0.','')\n}\n\nexport function isEmpty(obj){\n    return obj && Object.keys(obj).length === 0 && obj.constructor === Object\n}\n\n//takes in time in ms, returns rounded up in min\nexport function msToMins(ms) {\n  return Math.round(ms/(1000*60))\n}\n\n//takes in seconds, returns hh:mm:ss\nexport function secToStr(sec){\n  let hr = Math.floor(sec / (60*60))\n  sec = sec % (60*60)\n  let min = Math.floor(sec / 60)\n  sec = sec % 60\n\n  let hs = hr > 0 ? hr.toString().padStart(2, '0')+\":\" : \"\"\n  let ms = min.toString().padStart(2,0)+\":\"\n  let ss = sec.toString().padStart(2,0)\n  return `${hs}${ms}${ss}`\n}\n\n//takes in hh:mm:ss, returns total seconds\nexport function strToSec(str){\n  let time = str.split(\":\").map(e => parseInt(e))\n  let sec = time.length == 3? time[0]*3600 + time[1]*60 + time[2] : time[0]*60 + time[1]\n  return sec\n}\n\n//takes in youtube url, returns vid\nexport function urlToVid(val){\n    if(!val.startsWith(\"http\")){\n      val = \"https://\"+val\n    }\n    let url = \"\"\n    try {\n      url = new URL(val)\n    } catch(e) {\n      console.log(e)\n      return \"\"\n    }\n  \n    if ((url.host == \"www.youtube.com\" || url.host == \"youtube.com\") && \n        (url.pathname == \"/watch\")){\n          return url.searchParams.get(\"v\")\n    }\n    // should I also confirm url isn't a 404?\n    return \"\"\n}\n\nexport async function getYTDetails(video_id) {\n  const decodeQueryString = (queryString) => {\n    let key, keyValPair, keyValPairs, r, val, _i, _len\n    r = {}\n    keyValPairs = queryString.split(\"&\");\n    for (_i = 0, _len = keyValPairs.length; _i < _len; _i++) {\n      keyValPair = keyValPairs[_i];\n      key = decodeURIComponent(keyValPair.split(\"=\")[0]);\n      val = decodeURIComponent(keyValPair.split(\"=\")[1] || \"\")\n      if (key == \"url\") {\n        let urlParams = new URLSearchParams(val)\n        let lsig = urlParams.get('lsig')\n        r.lsig = lsig\n      }\n      r[key] = val\n    }\n    return r\n  }\n\n  const decodeStreamMap = (player_response) => {\n    let quality, type, _i, _len, _ref\n    let sources = {}\n    _ref = player_response.streamingData.formats\n    for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n      let stream = _ref[_i]\n      type = stream.mimeType.split(\";\")[0]\n      quality = stream.quality\n      stream.original_url = stream.url\n      sources[\"\" + type + \" \" + quality] = stream\n    }\n    return sources\n  }\n\n  const getSource = (video, type, quality) => {\n    let exact, key, lowest, source, _ref;\n    lowest = null;\n    exact = null;\n    _ref = video.sources;\n    for (key in _ref) {\n      source = _ref[key];\n      if (source.mimeType.includes(type)) {\n        if (source.quality.match(quality)) {\n          exact = source;\n        } else {\n          lowest = source;\n        }\n      }\n    }\n    return exact || lowest;\n  }\n\n  const response = await fetch(`https://at8u8s124e.execute-api.eu-west-1.amazonaws.com/prod?video_id=${video_id}`,\n                    {headers: { 'Content-Type' : 'text/plain'}})\n  const video_info = await response.text()\n  let video = decodeQueryString(video_info);\n  if (video.status === 'fail') {\n    console.error(\"ERROR, failed to get video details\")\n    return video\n  }\n  let res = JSON.parse(video.player_response)\n  if(!res.streamingData){\n    throw \"Video cannot be played due to youtube permission restrictions by video owner\"\n  }\n  video.sources = decodeStreamMap(res)\n  let source = getSource(video, \"video/mp4\", \"hd720\")\n  let title = res.videoDetails.title.split(\"+\").join(\" \")\n  let thumbnail = res.videoDetails.thumbnail.thumbnails[3] ||\n                  res.videoDetails.thumbnail.thumbnails[0]\n  return {  ...source, title, thumbnail: thumbnail.url }\n\n  /* SAMPLE RESULTS returned\n  {\n    \"itag\": 22,\n    \"url\": \"https://r1---sn-q0cedn7s.googlevideo.com...\",\n    \"mimeType\": \"video/mp4;+codecs=\\\"avc1.64001F,+mp4a.40.2\\\"\",\n    \"bitrate\": 700788,\n    \"width\": 1280,\n    \"height\": 720,\n    \"lastModified\": \"1609999185256509\",\n    \"quality\": \"hd720\",\n    \"fps\": 24,\n    \"qualityLabel\": \"720p\",\n    \"projectionType\": \"RECTANGULAR\",\n    \"audioQuality\": \"AUDIO_QUALITY_MEDIUM\",\n    \"approxDurationMs\": \"162887\",\n    \"audioSampleRate\": \"44100\",\n    \"audioChannels\": 2,\n    \"original_url\": \"https://r1---sn-q0cedn7s.googlevideo.com/...\",\n    \"title\": \"\",\n    \"thumbnail\": \"imgurl.com\"\n  }\n  */\n}\n\n//https://github.com/gurumukhi/youtube-screenshot\nexport function captureScreenshot() {\n    let canvas = document.createElement(\"canvas\")\n    let video = document.querySelector(\"#vid\")\n    let ctx = canvas.getContext(\"2d\")\n    canvas.width = parseInt(video.offsetWidth)\n    canvas.height = parseInt(video.offsetHeight)\n    ctx.drawImage(video, 0, 0, canvas.width, canvas.height)\n    return canvas.toDataURL()\n}\n","import React from \"react\"\nimport Logo from \"./components/Logo\"\nimport { Dropdown, Menu, Modal, Input, Collapse, message } from \"antd\"\nimport { PlusOutlined, SettingFilled, WarningFilled } from '@ant-design/icons'\nimport { useHistory } from \"react-router-dom\";\nimport data from \"./data\"\nimport \"./AllCourses.css\"\nimport { randstr } from \"./utils\"\n\nconst { Panel } = Collapse;\n\n\nexport default class AllCourses extends React.Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      addModal: false,\n      editModal: false,\n      archiveModal: false,\n      deleteModal: false,\n      unArchiveModal: false,\n    }\n    this.codeInputRef = null\n    this.nameInputRef = null\n    this.currentCourse = null\n  }\n\n  //get's the current course\n  currentCourseDetails = () => {\n    let code = \"\", name = \"\"\n    if (this.currentCourse !== null){\n      code = data[this.currentCourse].code || \"\"\n      name = data[this.currentCourse].name || \"\"\n    }\n    return {code, name}\n  }\n\n  // toggles the modals\n  toggleAdd = () => this.setState({addModal:!this.state.addModal})\n  toggleEdit = (key=null) => {\n    // if we're toggling false -> true, i.e. modal is opening\n    // set currentCourse to key, if it's closing, set to null\n    this.currentCourse = this.state.editModal? null : key\n    this.setState({editModal:!this.state.editModal})\n  }\n  toggleArchive = (key=null) => {\n    this.currentCourse = this.state.archiveModal? null : key\n    this.setState({archiveModal:!this.state.archiveModal})\n  }\n  toggleUnArchive = (key=null) => {\n    this.currentCourse = this.state.unArchiveModal? null : key\n    this.setState({unArchiveModal:!this.state.unArchiveModal})\n  }\n  toggleDelete = (key=null) => {\n    this.currentCourse = this.state.deleteModal? null : key\n    this.setState({deleteModal:!this.state.deleteModal})\n  }\n\n  // the modal contents for each of the four modals\n  addModalBody = () => (\n    <div>\n      <p className=\"label\">Course Code</p>\n      <Input  placeholder=\"Eg. 'CSE 170'\"\n              ref={input => this.codeInputRef = input}/>\n      <p className=\"label\">Course Title</p>\n      <Input  placeholder=\"Eg. 'Interaction Design'\"\n              ref={input => this.nameInputRef = input}/>\n    </div>\n  )\n  editModalBody = () => {\n    let {code = \"\", name = \"\"} = this.currentCourseDetails()\n    return (\n      <div>\n        <p className=\"label\">Course Code</p>\n        <Input  placeholder=\"Eg. 'CSE 170'\"\n                defaultValue={code}\n                ref={input => this.codeInputRef = input}/>\n        <p className=\"label\">Course Title</p>\n        <Input  placeholder=\"Eg. 'Interaction Design'\"\n                defaultValue={name}\n                ref={input => this.nameInputRef = input}/>\n      </div>\n    )\n  }\n  archiveModalBody = () => {\n    let {code = \"\", name = \"\"} = this.currentCourseDetails()\n    return (\n      <div className=\"archive-message\">\n        <p>Are you sure you want to archive</p>\n        <h2>{code}</h2>\n        <h3>{name}</h3>\n      </div>\n    )\n  }\n  unArchiveModalBody = () => {\n    let {code = \"\", name = \"\"} = this.currentCourseDetails()\n    return (\n      <div className=\"archive-message\">\n        <p>Are you sure you want to unarchive</p>\n        <h2>{code}</h2>\n        <h3>{name}</h3>\n      </div>\n    )\n  }\n  deleteModalBody = () => {\n    let {code = \"\", name = \"\"} = this.currentCourseDetails()\n    return (\n      <div className=\"error-message\">\n        <p>Are you sure you want to delete</p>\n        <h2>{code}</h2>\n        <h3>{name}</h3>\n        <span><b>Danger!</b> Once you've deleted the course you\n          cannot get it back, it is permanent.</span>\n      </div>\n    )\n  }\n\n  // All the actions - add new, edit, archive and delete\n  addCourse = () => {\n    let code = this.codeInputRef.state.value\n    let name = this.nameInputRef.state.value\n\n    let cid = \"cid-\" + randstr()\n    data[cid] = {code, name, active:true, videos:[]}\n    localStorage.setItem(\"data\", JSON.stringify(data))\n    this.toggleAdd()\n    message.success(<span>Course \"<b>{code}</b> : {name}\" successfully created!</span>)\n  }\n  editCourse = () => {\n    let code = this.codeInputRef.state.value\n    let name = this.nameInputRef.state.value\n\n    let cid = this.currentCourse\n    data[cid] = Object.assign(data[cid], {code, name})\n    localStorage.setItem(\"data\", JSON.stringify(data))\n    this.toggleEdit()\n    message.success(<span>Course \"<b>{code}</b> : {name}\" successfully edited!</span>)\n  }\n  archiveCourse = () => {\n    let {code, name} = data[this.currentCourse]\n    data[this.currentCourse].active = false\n    localStorage.setItem(\"data\", JSON.stringify(data))\n    this.toggleArchive()\n    message.success(<span>Course \"<b>{code}</b> : {name}\" successfully archived!</span>)\n  }\n  unArchiveCourse = () => {\n    let {code, name} = data[this.currentCourse]\n    data[this.currentCourse].active = true\n    localStorage.setItem(\"data\", JSON.stringify(data))\n    this.toggleUnArchive()\n    message.success(<span>Course \"<b>{code}</b> : {name}\" successfully unarchived!</span>)\n  }\n  deleteCourse = () => {\n    let {code, name} = data[this.currentCourse]\n    delete data[this.currentCourse]\n    localStorage.setItem(\"data\", JSON.stringify(data))\n    this.toggleDelete()\n    message.success(<span>Course \"<b>{code}</b> : {name}\" successfully deleted!</span>)\n  }\n\n  render(){\n    let objs = Object.keys(data)\n    let {addModal, editModal, archiveModal, deleteModal, unArchiveModal} = this.state\n\n    let cr_active = objs.filter(key => data[key].active)\n    cr_active.sort((cid1, cid2) => data[cid1].code > data[cid2].code? 1:-1)\n\n    let cr_archived = objs.filter(key => !data[key].active)\n    cr_archived.sort((cid1, cid2) => data[cid1].code > data[cid2].code? 1:-1)\n\n    return (\n      <div className=\"courses-shell\">\n        <Nav onAddCourse={this.toggleAdd}/>\n        <div className=\"course-container\">\n        <Collapse defaultActiveKey={['1']} \n                  ghost \n                  expandIconPosition=\"right\" \n                  className=\"course-collapse more-specificity\">\n          <Panel header=\"Active\" key=\"1\">\n            { cr_active.map(key => <Course key={key} cid={key}\n                              onEdit={() => this.toggleEdit(key) }\n                              onArchive={() => this.toggleArchive(key)}\n                              onDelete={() => this.toggleDelete(key)} />\n                      )\n            }\n          </Panel>\n          <Panel header=\"Archived\" key=\"2\">\n            { cr_archived.map(key => <Course key={key} cid={key}\n                              onEdit={() => this.toggleEdit(key) }\n                              onUnArchive={() => this.toggleUnArchive(key)}\n                              onDelete={() => this.toggleDelete(key)} />\n                      )\n            }\n          </Panel>\n        </Collapse>\n        </div>\n        <Modal  title=\"Create course\"\n                visible={addModal}\n                okText=\"Create\"\n                onOk={this.addCourse}\n                onCancel={this.toggleAdd}\n                destroyOnClose\n                className=\"course-config-modal\"\n              >\n          {this.addModalBody()}\n        </Modal>\n        <Modal  title=\"Edit course\"\n                visible={editModal}\n                okText=\"Update\"\n                cancelText=\"Discard changes\"\n                onOk={this.editCourse}\n                onCancel={this.toggleEdit}\n                destroyOnClose\n                className=\"course-config-modal\"\n              >\n          {this.editModalBody()}\n        </Modal>\n        <Modal  title={<span className=\"title\"><WarningFilled className=\"arch-icon\"/> Archive course</span>}\n                visible={archiveModal}\n                okText=\"Archive\"\n                okType=\"danger\"\n                onOk={this.archiveCourse}\n                onCancel={this.toggleArchive}\n                destroyOnClose\n                className=\"course-config-modal\"\n              >\n          {this.archiveModalBody()}\n        </Modal>\n        <Modal  title={<span className=\"title\">Unarchive course</span>}\n                visible={unArchiveModal}\n                okText=\"Unarchive\"\n                okType=\"primary\"\n                onOk={this.unArchiveCourse}\n                onCancel={this.toggleUnArchive}\n                destroyOnClose\n                className=\"course-config-modal\"\n              >\n          {this.unArchiveModalBody()}\n        </Modal>\n        <Modal  title={<span className=\"title\"><WarningFilled className=\"delt-icon\"/> Delete course</span>}\n                visible={deleteModal}\n                okText=\"Delete the course\"\n                cancelText=\"No, go back\"\n                onOk={this.deleteCourse}\n                okType=\"danger\"\n                onCancel={this.toggleDelete}\n                cancelButtonProps={{type:\"primary\"}}\n                destroyOnClose\n                className=\"course-config-modal\"\n              >\n          {this.deleteModalBody()}\n        </Modal>\n      </div>\n    )\n  }\n}\n\nfunction Nav({onAddCourse}){\n  let history = useHistory()\n  const goToHome = () => {\n    history.push(`/`)\n  }\n  return (\n    <nav className=\"all-courses-nav\">\n      <Logo style={{height: \"36px\", width:\"36px\", padding:\"3px\"}} onClick={goToHome}/>\n      <p>COURSES</p>\n      <PlusOutlined onClick={onAddCourse}/>\n    </nav>\n    )\n}\n\n// the card ui for a single course\nfunction Course(props){\n  const {name, code} = data[props.cid]\n  let vcount = data[props.cid].videos.length\n  const {onEdit, onArchive, onDelete, onUnArchive} = props\n\n  let history = useHistory()\n  const goToCourse = () => {\n    history.push(`/notes/${props.cid}`)\n  }\n\n  const menu = courseCardMenu({onEdit, onArchive, onDelete, onUnArchive})\n\n  return(\n    <div className=\"course-card\" onClick={goToCourse}>\n      <div className=\"course-card-header\">\n        <h2 className=\"course-code\">{code}</h2>\n        <Dropdown \n            overlay={menu}\n            trigger={['click']}\n            placement=\"bottomRight\" \n            overlayClassName=\"course-card-edit\"\n        >\n          <SettingFilled onClick={e => e.stopPropagation()} />\n        </Dropdown>\n      </div>\n      <p  className=\"course-name\">{name}</p>\n      <p  className=\"course-vcount\">{vcount} Lectures </p>\n    </div>\n  )\n}\n\nconst courseCardMenu = ({onEdit, onArchive, onDelete, onUnArchive}) => (\n  <Menu onClick={(e) => e.domEvent.stopPropagation()}>\n    <Menu.Item onClick={onEdit}>\n      Edit Course\n    </Menu.Item>\n    <Menu.Divider />\n    {onArchive? \n        (<Menu.Item onClick={onArchive}>\n          Archive Course\n        </Menu.Item>) \n    :   (<Menu.Item onClick={onUnArchive}>\n          Unarchive Course\n        </Menu.Item>)}\n    <Menu.Divider />\n    <Menu.Item danger onClick={onDelete}>\n       Delete Course\n    </Menu.Item>\n  </Menu>\n)","import React from \"react\"\nimport Logo from \"./components/Logo\"\nimport { Select, Collapse, Menu, Dropdown, Modal, Input, Breadcrumb } from \"antd\"\nimport { SearchOutlined, SettingFilled, PlusOutlined,\n         CaretRightOutlined, HomeOutlined } from '@ant-design/icons'\nimport { withRouter, useHistory, Link } from \"react-router-dom\"\nimport { secToStr, urlToVid } from \"./utils\"\nimport data from \"./data\"\nimport \"./AllVideos.css\"\n\nconst { Search } = Input\nconst { Panel } = Collapse\nfunction filterNotesByTags(notes, tags){\n  return notes.filter(note => tags.some(tag => note.tags.includes(tag)))\n}\n\nclass AllVideos extends React.Component {\n  constructor(props){\n    super(props)\n    this.filterTags = [] // this is to keep track of as select changes\n\n    let q = this.props.location.search || \"\"\n    let params = new URLSearchParams(q)\n    let tags = params.getAll(\"tags\")\n    if(tags.length > 0){\n      this.filterTags= tags\n    }\n    //we don't apply filter when filter dropdown is open\n    this.filterOpen = false\n\n    this.state = {\n      filterTags: this.filterTags,\n      addingLecture: false, //modal that opens while adding lecture\n      lectureValid: true,\n    }\n  }\n\n  goToHome = () => this.props.history.push(\"/\")\n  getCid = () => this.props.match.params[\"courseId\"]\n  getTagsOpts = () => {\n    let cid = this.getCid()\n    let videos = data[cid].videos\n    let tagOptions = []\n    let tags = {}\n    videos.map(video =>\n      video.notes.map(note =>\n        note.tags.map(tag => tags[tag] = true)\n      )\n    )\n    Object.keys(tags).map(tag => tagOptions.push({label:tag, value:tag}))\n    return tagOptions\n  }\n\n  // we only want to apply the values once the user is done selecting,\n  // hence cache in this.filterTags, and update state when necessary.\n  updateFilter = () => {\n    const {history, location} = this.props\n    this.setState({filterTags:this.filterTags})\n    let params = new URLSearchParams(\"\")\n    this.filterTags.forEach(tag => params.append(\"tags\", tag))\n    history.replace(`${location.pathname}?${params}`)\n  }\n\n  onVideoDeleted = (vid) => {\n    const cid = this.getCid()\n    data[cid].videos = data[cid].videos.filter(video => video.id != vid)\n    localStorage.setItem(\"data\", JSON.stringify(data))\n    this.forceUpdate()\n  }\n\n  getNav = () => {\n    const options = this.getTagsOpts()\n    return (\n    <nav className=\"all-videos-nav\">\n      <Logo style={{height: \"36px\", width:\"36px\", padding:\"3px\"}} onClick={this.goToHome}/>\n      <Select \n        mode=\"tags\" \n        className=\"filter-tags\"\n        placeholder=\"Search by tags\"\n        showSearch={true}\n        allowClear\n        defaultValue={this.filterTags}\n        options={options}\n        onDropdownVisibleChange={(open) => {\n          this.filterOpen = open\n          if(!open) //dropdown just closed\n            this.updateFilter()\n        }}\n        onChange={tags => {\n          this.filterTags = tags\n          if(!this.filterOpen) //change without open dropdown\n            this.updateFilter() //update immediately\n        }}\n      >\n      </Select>\n      <SearchOutlined style={{fontSize: \"22px\"}}/>\n    </nav>\n  )}\n\n  getAddModal = () => {\n    const errMsg = <p className=\"err-msg\">Please ensure that the URL is formatted correctly!</p>\n    return (\n      <Modal\n        className=\"add-lecture-modal\"\n        title=\"Add a new lecture\"\n        onCancel={() => this.setState({addingLecture:false})}\n        visible={this.state.addingLecture}\n        destroyOnClose\n        footer={null}\n      >\n        <h3> Video Link </h3>\n        <Search\n          placeholder=\"Enter video link\"\n          allowClear\n          enterButton={<CaretRightOutlined />}\n          onSearch={this.addLecture}\n        />\n        {this.state.lectureValid? null: errMsg}\n      </Modal>\n    )\n  }\n\n  addLecture = (val) => {\n    if (val === \"\") {\n      return\n    }\n    let id = urlToVid(val)\n    if(id === \"\") {\n      this.setState({lectureValid: false})\n    }\n    else{\n      this.props.history.push(`/video/${id}`, {class:this.getCid()})\n    }\n  }\n\n  getSearchResults = (videos, tags) => {\n    // filter the videos so that at a video has at least one matching note\n    videos = videos.map(video => ({...video, notes:filterNotesByTags(video.notes, tags)}))\n                   .filter(video => video.notes.length > 0)\n    let vids = videos.map(video => video.id)\n\n    return (\n    <>\n      <div className=\"search-results\">\n        You are currently searching for &nbsp;\n        {tags.map(s => <span className=\"s-tag\" key={s}>{s}</span>)}\n      </div>\n      <Collapse\n        ghost\n        defaultActiveKey={vids}\n        expandIconPosition=\"right\"\n        className=\"video-search-collapse\"\n      >\n        {\n          videos.map(video => (\n            <Panel key={video.id} header={video.title}>\n              { video.notes.map(note => \n                  <Note key={note.id} data={note} vid={video.id}/>\n              )}\n            </Panel>\n            )\n          )\n        }\n      </Collapse>\n    </>\n    )\n  }\n\n  render(){\n    let cid = this.props.match.params[\"courseId\"]\n    const {filterTags} = this.state\n    const course = data[cid]\n    const videos = [...course.videos]\n    videos.sort((v1,v2) => v1.title < v2.title? 1:-1)\n    return (\n      <div className=\"videos-shell\">\n        {this.getNav()}\n        <Breadcrumb\n          separator={<CaretRightOutlined />}\n        >\n          <Breadcrumb.Item>\n            <Link to=\"/\"><HomeOutlined /></Link>\n          </Breadcrumb.Item>\n          <Breadcrumb.Item>\n            <Link to=\"/notes\">Courses</Link>\n          </Breadcrumb.Item>\n          <Breadcrumb.Item>\n            {course.code}\n          </Breadcrumb.Item>\n        </Breadcrumb>\n\n        <div className=\"video-container\">\n          <div className=\"course-title-container\">\n            <h2 className=\"course-title\">{course.code}: {course.name}</h2>\n            <PlusOutlined onClick={() => this.setState({addingLecture:true})}/>\n          </div>\n          {filterTags.length? this.getSearchResults(videos, filterTags)\n            : videos.map(video => <Video \n                                      key={video.id}\n                                      video={video}\n                                      onDeleted={() => this.onVideoDeleted(video.id)}\n                                  />)}\n        </div>\n        {this.getAddModal()}\n      </div>\n    )\n  }\n}\n\nexport default withRouter(AllVideos)\n\n\n// the card ui for a single video lecture\nfunction Video(props){\n  let video = props.video\n  const {id, title, length, image, notes} = video\n  const ncount = notes.length\n\n  let history = useHistory()\n  const goToCourse = () => {\n    history.push(`/video/${id}`)\n  }\n\n  const onDeleteing = () => {\n    let content = `You have ${notes.length} notes and will lose all of them.\n    This action is irreversible!`\n    Modal.confirm({\n      title:\"Are you sure you want to delete this lecture?\",\n      content: content,\n      okText:\"Delete\",\n      cancelText:\"No, keep\",\n      okType:\"danger\",\n      onOk:props.onDeleted\n    })\n  }\n\n  const getEditMenu = () => (\n    <Menu onClick={(e) => e.domEvent.stopPropagation()}>\n      <Menu.Item danger onClick={onDeleteing}>\n        Delete Lecture\n      </Menu.Item>\n    </Menu>\n  )\n\n  let h = Math.floor(length / 60)\n  let m = length % 60\n  const time = h > 0? `${h} hours ${m} min` : `${m} min`\n\n  return(\n    <div className=\"video-card\" onClick={goToCourse}>\n      <div className=\"video-card-header\">\n        <h2 className=\"video-title\">{title}</h2>\n        <Dropdown \n          overlay={getEditMenu()}\n          trigger={['click']}\n          placement=\"bottomRight\" \n          overlayClassName=\"video-card-edit\"\n        >\n          <SettingFilled onClick={e => e.stopPropagation()} />\n        </Dropdown>\n      </div>\n      {/* should the card also hold some description? user defined? taken from youtube? */}\n      <p  className=\"video-details\">{ncount} Notes <b></b> {time}</p>\n      <img src={image} className=\"thumbnail\" alt={`Thumbnail for ${title}`}/>\n    </div>\n  )\n}\n\n\n/*\nNOTE : CSS is a part of VideoNotes.css\n*/\nfunction Note(props) {\n  let history = useHistory()\n  const onTimestamp = (sec) => {\n    // should do a history.push(/video/vid?t=sec)\n    history.push(`/video/${props.vid}?t=${sec}`)\n  }\n  const {tags, timestamp, content=\"\"} = props.data\n  return (\n    <div className=\"note-item\">\n        <div className=\"note-top\">\n          <div className=\"note-ts\" onClick={()=>onTimestamp(timestamp)}>{secToStr(timestamp)}</div>\n        </div>\n        <div className=\"note-content\">\n          {content}\n        </div>\n        <div className=\"note-tags\">\n          {tags.map(tag => <div className=\"note-tag\" key={tag}>#{tag}</div>)}\n        </div>\n    </div>\n  )\n}","import React from \"react\"\nimport { withRouter, Prompt, Link } from \"react-router-dom\"\nimport { Spin, Skeleton, Dropdown, Modal, Select,\n         Menu, message, TimePicker, Button, Input } from \"antd\"\nimport { SearchOutlined, SettingFilled, PlusOutlined, PushpinOutlined,\n         PushpinFilled, ArrowRightOutlined } from '@ant-design/icons'\nimport moment from 'moment'\n\nimport Logo from \"./components/Logo\"\nimport { getYTDetails, isEmpty, msToMins, secToStr, strToSec, randstr, historyLen } from \"./utils\"\nimport data from \"./data\"\n\nimport \"./VideoNotes.css\"\nconst { TextArea } = Input\n\n/* LOGIC + Dataflow\n  CURRENT : We have two different scenarios -\n    1. Lecture Exists\n      - VNotes makes the request for video details. Once it processes\n          the return val, it hands over the 'url' to VPlayer.\n      - The Vplayer shows a loading screen until it has props.url\n      - The VNotes shows it's own loading for the title+class, and notes\n          section on intial render, then in ComponentDidMount it fetches\n          the data from local storage\n    2. Additionally for New Lectures\n      - Title and class are defaulted to \"Title\" and \"unclassified\"\n      - The video object is created only on the first edit, viz on\n          change of title, change of name or New note\n      - The ID used is the same as the youtube video id of the url\n      - During creation, 'length' for the Lecture is got as a part of\n          the api request VNotes made earlier (to get the url).\n\n  FINAL : later on if we have time\n    1. Have our own backend (firebase function) which gets the url\n        This will give us title, thumbnail and description?\n    2. Reconsider auto-create for new videos\n\n  There were a bunch of other considerations -\n    1. Should 'id' be the same as youtube's video id? (currently : YES)\n        After a lot of deleberation, yes, since otherwise you'd have to\n        check for existance & generate a new uri at <Home/> and then also\n        figure out a way for it to communicate the url id to <VideoNotes/>.\n        Or you need to go to '/new' and then move to '/id' on save.\n        Finally decided to have id = youtube id. Nothing to lose.\n    2. Auto Create for new videos? (currently : NO)\n        This is tricky as I need the length as a part of the {video} details.\n        Creation should be done in ComponentDidMount, but I don't have the\n        length. I guess I could create it after I get the request, but I'll\n        think about it later.\n*/\n\nfunction getVideoDetails(vid){\n  let cid, video, found = false\n  for(cid in data){\n    video = data[cid].videos.find(video => video.id === vid)\n    if (video) {\n      found = true\n      break\n    }\n  }\n  return found? video : {}\n}\n\nfunction getVideoCourse(vid){\n  let cid, video, found = false\n  for(cid in data){\n    video = data[cid].videos.find(video => video.id === vid)\n    if (video) {\n      found = true\n      break\n    }\n  }\n  if (found){\n    return {cid, ...data[cid]}\n  }\n  return {cid:\"unclassified\"}\n}\n\n// create a new video and adds it to data\nfunction createVideoEntry(cid, lectureDetails){\n  // were pushing the lecture directly, any changes\n  // we make to it should also reflect on 'data'\n  data[cid].videos.unshift(lectureDetails)\n  localStorage.setItem(\"data\", JSON.stringify(data))\n}\n\n// get's all the courses in options format\nfunction getCourseOpts(){\n  const cids = Object.keys(data)\n  let opts = []\n  for(let cid of cids){\n    let label = `${data[cid].code} : ${data[cid].name}`\n    opts.push({value:cid, label:label})\n  }\n  return opts\n}\n\n// get's all the unique tags for a course in options format\nfunction getTagsOpts(cid) {\n  let videos = data[cid].videos\n  let tagOptions = []\n  let tags = {}\n  videos.map(video =>\n    video.notes.map(note =>\n      note.tags.map(tag => tags[tag] = true)\n    )\n  )\n  Object.keys(tags).map(tag => tagOptions.push({label:tag, value:tag}))\n  return tagOptions\n}\n\n// replace the entry in data[cid].videos array where video.id = vid\nfunction editVideoDetails(videoDetails){\n  let course = getVideoCourse(videoDetails.id)\n  let uIndex = course.videos.findIndex((video) => video.id == videoDetails.id)\n  course.videos[uIndex] = videoDetails\n  localStorage.setItem(\"data\", JSON.stringify(data))\n}\n\n// checks if note has at least one tag of tags\nfunction noteHasTag(note, tags){\n  return tags.some(tag => note.tags.includes(tag))\n}\n\nclass VideoNotes extends React.Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      ytDetails: {}, //remote data - url\n      lectureDetails: {}, //data[cid].videos[vid]\n      editingNote: null, //nid of note being edited\n      newNote: false, //whether we're editing a newly create note (just after '+')\n      editingLecture: false, //whether I'm editing title & class of lecture\n      search:[],\n      pinned: true // is the video pinned?\n    }\n    this.tempEdits = {} //temp data to hold title & class edit details\n    this.filterTags = []\n    this.filterOpen = false\n  }\n\n  goToHome = () => this.props.history.push(\"/\")\n\n  getVideoId = () => this.props.match.params[\"videoId\"]\n\n  getNav = () => {\n    let {cid} = getVideoCourse(this.getVideoId())\n    let options = getTagsOpts(cid)\n    return (\n    <nav className=\"notes-nav\">\n      <Logo style={{height: \"36px\", width:\"36px\", padding:\"3px\"}} onClick={this.goToHome}/>\n      <div className=\"filter-select\">\n        <Select \n          mode=\"tags\"\n          className=\"filter-tags specificiy\"\n          placeholder=\"Search by tags\"\n          showSearch={true}\n          allowClear\n          options={options}\n          onDropdownVisibleChange={(open) => {\n            this.filterOpen = open\n            if(!open) this.updateFilter()\n          }}\n          onChange={(tags) => {\n            this.filterTags = tags\n            if(!this.filterOpen) this.updateFilter()\n          }}\n        >\n        </Select>\n        <SearchOutlined style={{fontSize: \"22px\"}}/>\n      </div>\n    </nav>\n  )}\n\n  updateFilter = () => {\n    this.setState({search:this.filterTags})\n  }\n\n  componentDidMount() {\n    const vid = this.getVideoId()\n    // get the details\n    let lecture = getVideoDetails(vid)\n\n    // get the media details\n    getYTDetails(vid).then(res => {\n      if(isEmpty(lecture)){\n        // create a lecture entry with defaults\n        let length = msToMins(parseInt(res[\"approxDurationMs\"]) || 0)\n        lecture = {id:vid, title:res.title, notes:[], image:res.thumbnail, length}\n        let cid = this.props.location.state?.class || \"unclassified\"\n        createVideoEntry(cid, lecture)\n        // message.success(\"Created a new lecture under \" + data[cid].name)\n        message.success({\n            duration:3,\n            content:`Created a new lecture under \"${data[cid].name}\"`,\n            top:100,\n        })\n      }\n      this.setState({ytDetails:res, lectureDetails:lecture})\n    }).catch(e => {\n      Modal.error({\n        title:e,\n        okText:\"Okay\",\n        onOk:this.props.history.goBack\n      })\n    })\n  }\n\n  onNoteEditing = (nid) => {\n    this.setState({editingNote: nid})\n  }\n\n  onNoteEdited = (update, uNote) => {\n    if(update){\n      let notes = this.state.lectureDetails.notes\n      let i = notes.findIndex(note => note.id === uNote.id)\n      notes[i] = uNote\n      notes.sort((n1, n2) => n1.timestamp - n2.timestamp)\n      /* bad practice \\_()_/\n      // I should actually update lectureDetails, but this works?\n      // I'm actually supposed to do what I did in \"onNoteDeleted\"\n        uNotes = [...notes]\n        uLecture = {...lecture, notes:uNotes}\n        editVideoDetails(newLecture)\n        this.setState({lectureDetails: newLecture})\n       */\n      localStorage.setItem(\"data\", JSON.stringify(data))\n    }\n    this.setState({editingNote:null, newNote:false})\n    if (update)\n      message.success(`Note \"${secToStr(uNote.timestamp)}\" successfully edited!`)\n  }\n\n  onNoteDeleted = (nid) => {\n    let lecture = this.state.lectureDetails\n    let notes = lecture.notes.filter(note => note.id !== nid)\n    let newLecture = {...lecture, notes:notes}\n    editVideoDetails(newLecture)\n    this.setState({lectureDetails: newLecture, newNote:false, editingNote:null})\n    message.success(\"Note successfully deleted!\")\n  }\n\n  onNoteAdded = () => {\n    let id = \"nid-\" + randstr()\n    let timestamp = Math.round(document.querySelector(\"#vid\").currentTime)\n    let newNote = {id, timestamp, content:\"\", tags:[]}\n    let notes = this.state.lectureDetails.notes\n    notes.push(newNote)\n    notes.sort((n1, n2) => n1.timestamp - n2.timestamp)\n    localStorage.setItem(\"data\", JSON.stringify(data))\n    this.setState({editingNote:id, pinned:false, newNote:true})\n    document.querySelector(\"#vid\").pause()\n  }\n\n  updateTitleClass = () => {\n    // update the title or class\n    let oldCid = getVideoCourse(this.getVideoId()).cid\n    let newCid = this.tempEdits.class\n    if(newCid && (newCid!== oldCid)){\n      // remove video from old cid\n      data[oldCid].videos = data[oldCid].videos.filter(v => \n                                              v.id !== this.getVideoId())\n\n      // move it into new cid\n      data[newCid].videos.unshift(this.state.lectureDetails)\n      localStorage.setItem(\"data\", JSON.stringify(data))\n    }\n    if(this.tempEdits.title){\n      // bad practice \\_()_/\n      // should setState + update data with new obj\n      this.state.lectureDetails.title = this.tempEdits.title\n      localStorage.setItem(\"data\", JSON.stringify(data))\n    }\n\n    this.setState({editingLecture:false})\n    this.tempEdits = {}\n  }\n\n  getTitleModal = () => {\n    let opts = getCourseOpts()\n    let {cid} = getVideoCourse(this.getVideoId())\n\n    return (\n      <Modal \n        title=\"Edit lecture details\"\n        visible={this.state.editingLecture}\n        okText=\"Update\"\n        cancelText=\"Discard changes\"\n        onCancel={() => {\n          this.setState({editingLecture:false})\n          this.tempEdits = {}\n        }}\n        onOk={this.updateTitleClass}\n        destroyOnClose\n        className=\"lecture-edit-modal\"\n      >\n        <div className=\"lecture-edit-body\">\n          <p className=\"label\">Title</p>\n          <Input  placeholder=\"Lecture Title\"\n                  className=\"title-input\"\n                  defaultValue={this.state.lectureDetails.title}\n                  onChange={(e) => this.tempEdits.title = e.target.value}/>\n          <p className=\"label\">Course</p>\n          <Select\n            defaultValue={cid}\n            options={opts}\n            onChange={(cid) => this.tempEdits.class = cid}>\n          </Select>\n        </div>\n      </Modal>\n    )\n  }\n\n  getEditMenu = () => {\n    return(\n    <Menu onClick={(e) => e.domEvent.stopPropagation()}>\n      <Menu.Item onClick={() => this.setState({editingLecture: true, tempEdits: {}})}>\n        Edit Details\n      </Menu.Item>\n      <Menu.Item danger onClick={this.onDeleteing}>\n        Delete Lecture\n      </Menu.Item>\n    </Menu>)\n  }\n\n  onDeleteing = () => {\n    let notes = this.state.lectureDetails.notes\n    let content = `You have ${notes.length} notes and will lose all of them.\n    This action is irreversible!`\n    Modal.confirm({\n      title:\"Are you sure you want to delete this lecture?\",\n      content: content,\n      okText:\"Delete\",\n      cancelText:\"No, keep\",\n      okType:\"danger\",\n      onOk: this.deleteLecture\n    })\n  }\n\n  deleteLecture = () => {\n    let lecture = this.state.lectureDetails\n    const cid = getVideoCourse(lecture.id).cid\n    data[cid].videos = data[cid].videos.filter(video => video.id != lecture.id)\n    localStorage.setItem(\"data\", JSON.stringify(data))\n    message.success(`Lecture \"${lecture.title}\" has been deleted!`)\n    if(this.props.history.length == historyLen){\n      // if the history is the same as when it first loaded => this is the\n      // first page and going back would take us away from flow notes\n      this.props.history.replace(\"/\")\n      //only prob when you hit len=50, doesn't inc any more\n    }\n    else // we will still stay in the app even if we go back\n      this.props.history.goBack()\n  }\n\n  getLoadingDOM = () => <Skeleton active/>\n\n  render(){\n    let { lectureDetails, ytDetails:{url}, editingLecture,\n          editingNote, pinned, search, newNote } = this.state\n    const vid = this.getVideoId()\n    const loading = isEmpty(lectureDetails)\n    let course = getVideoCourse(vid)\n    let notes = lectureDetails.notes\n    if(search.length>0)\n      notes = notes.filter(note => noteHasTag(note,search))\n\n    // if a note is bring edited or if search is active, can't edit\n    const editable = (editingNote || search.length > 0) ? false : true\n    return (\n      <div className=\"notes-shell\">\n        {this.getNav()}\n        <VideoPlayer url={url} pinned={pinned}/>\n        {loading? this.getLoadingDOM() :\n        (<>\n        <div className=\"notes-content-wrapper\">\n          <div className=\"lecture-details\">\n            <div>\n              <h2 className=\"lecture-title\">{lectureDetails.title}</h2>\n              <Link to={`/notes/${course.cid}`}>\n                <span className=\"lecture-course\">\n                  {course.code} <b></b> {course.name}\n                  <ArrowRightOutlined style={{fontSize:\"14px\", paddingLeft:\"6px\"}} />\n                </span>\n              </Link>\n            </div>\n            <Dropdown\n              overlay={this.getEditMenu()}\n              trigger={['click']}\n              placement=\"bottomRight\"\n              overlayClassName=\"\"\n            >\n              <SettingFilled onClick={e => e.stopPropagation()} />\n            </Dropdown>\n            {this.getTitleModal()}\n          </div>\n          <Prompt\n            when={(editingNote || editingLecture)?true:false}\n            message={_ => \"You have unsaved edits! Are you sure you want to move away?\"}\n          />\n          {\n            search.length > 0? <div className=\"search-results\">You are currently searching for &nbsp;\n                    <p style={{margin: \"7px 0\"}}>{search.map(s => <span className=\"s-tag\" key={s}>{s}</span>)}</p>\n                <span style={{color:\"gray\"}}>To edit or create new notes, please clear the search.</span>\n            </div> \n            : null\n          }\n          <div className=\"notes-container\">\n            {notes.map(note => (\n                  <Note\n                    key={note.id}\n                    data={note}\n                    vid={vid}\n                    editMode={editingNote == note.id}\n                    editable={editable}\n                    newNote={newNote}\n                    onEditing={() => this.onNoteEditing(note.id)}\n                    onDeleted={() => this.onNoteDeleted(note.id)}\n                    onEdited={this.onNoteEdited}\n                  />)\n            )}\n          </div>\n        </div>\n        <div className=\"notes-footer\">\n          <div className=\"left-side\">\n          {editable? <PlusOutlined onClick={this.onNoteAdded} style={{marginRight:\"18px\"}}/> : null}\n          </div>\n          <div className=\"right-side\">\n          { pinned? <PushpinFilled onClick={() => this.setState({pinned:false})}/> :\n                    <PushpinOutlined onClick={() => this.setState({pinned:true})}/> }\n          </div>\n        </div>\n        </>)}\n      </div>\n    )\n  }\n}\n\nexport default withRouter(VideoNotes)\n\n\nclass Note extends React.Component {\n  constructor(props){\n    super(props)\n    this.editData = {} //props.data being edited\n    this.note = React.createRef()\n  }\n\n  componentDidUpdate(oProps){\n    if(oProps.editMode != this.props.editMode)\n      this.note.current.scrollIntoView({behavior:\"smooth\", block:\"center\"})\n  }\n\n  componentDidMount(){\n    if(this.props.editMode == true)\n      this.note.current.scrollIntoView({behavior:\"smooth\", block:\"center\"})\n  }\n\n  onTimestamp = (sec) => {\n    // bad practice \\_()_/\n    document.querySelector(\"#vid\").currentTime = sec\n  }\n\n  onEditing = () => {\n    this.props.onEditing()\n  }\n  onDeleteing = () => {\n    Modal.confirm({\n      title:\"Are you sure you want to delete this note?\",\n      okText:\"Delete\",\n      cancelText:\"No, keep\",\n      okType:\"danger\",\n      onOk:this.props.onDeleted\n    })\n  }\n\n  // on edit: tell parent note 'id' is under edit, parent will update state => props.\n  // on edit complete: tell parent {nid: new data}, parent will update state => props.\n  // on delete complete : ask parent to delete note. parent will update state => props.\n  getEditMenu = () => (\n    <Menu onClick={(e) => e.domEvent.stopPropagation()}>\n      <Menu.Item onClick={this.props.onEditing}>\n        Edit Note\n      </Menu.Item>\n      <Menu.Divider />\n      <Menu.Item danger onClick={this.onDeleteing}>\n        Delete Note\n      </Menu.Item>\n    </Menu>\n  )\n\n  onDone = (update) => {\n    if(update){\n      let newNote = {...this.props.data, ...this.editData}\n      this.props.onEdited(update, newNote)\n    }\n    else if(this.props.newNote) {\n      // if this is a new note and you're \"discarding\" it,\n      // just delete it.\n      this.props.onDeleted()\n    }\n    else{\n      this.props.onEdited(update, null)\n    }\n    this.editData = {}\n  }\n\n  timeUpdated = (_, timeStr) => this.editData.timestamp = strToSec(timeStr)\n  contentUpdated = (e) => this.editData.content = e.target.value\n\n  getEditBody = () => {\n    let {timestamp, content, tags} = this.props.data\n    const isNew = this.props.newNote\n    \n    // get moment object for default HH:mm:ss - tricky to deal with the formats\n    let timeFormat = timestamp >= 3600 ? \"hh:mm:ss\" : \"mm:ss\"\n    let defaultTime = moment(secToStr(timestamp), timeFormat)\n    // save and discard button\n    let buttons = (\n            <div>\n              <Button danger onClick={()=>this.onDone(false)} style={{marginRight: \"10px\"}}>\n                Discard\n              </Button>\n              <Button type=\"primary\" onClick={()=>this.onDone(true)}>\n                {isNew? \"Create\": \"Save\" }\n              </Button>\n            </div>\n    )\n\n    let {cid} = getVideoCourse(this.props.vid)\n    let options = getTagsOpts(cid)\n\n    return (\n    <>\n      <div className=\"note-top-edit\">\n        <TimePicker defaultValue={defaultTime} format={timeFormat} \n                    showNow={false} onChange={this.timeUpdated} \n        />\n        {buttons}\n      </div>\n      <div className=\"note-content-edit\">\n        <TextArea rows={3} defaultValue={content?content:\"\"} onChange={this.contentUpdated}/>\n      </div>\n      <div className=\"note-tags-edit\">\n        <Select \n          mode=\"tags\" \n          className=\"edit-tags\"\n          placeholder=\"add tags\"\n          showSearch={true}\n          options={options}\n          defaultValue={tags}\n          onChange={(tags) => this.editData.tags = tags}\n        >\n        </Select>\n        <PlusOutlined />\n      </div>\n    </>\n    )\n  }\n\n  render(){\n    // editMode => is this note being edited, show the edit interface\n    // editable => if any other note is being edited don't show edit icon\n    const {editMode, editable} = this.props\n    const {tags, timestamp, content=\"\"} = this.props.data\n\n    return (\n      <div className=\"note-item\" ref={this.note}>\n        {editMode? this.getEditBody() :\n        (<>\n          <div className=\"note-top\">\n            <div className=\"note-ts\" onClick={()=>this.onTimestamp(timestamp)}>{secToStr(timestamp)}</div>\n            <div className=\"note-edit\" style={editable? {}: {display:\"none\"}}>\n              <Dropdown \n                overlay={this.getEditMenu()}\n                trigger={['click']}\n                placement=\"bottomRight\" \n                overlayClassName=\"note-item-edit\"\n              >\n                <SettingFilled onClick={e => e.stopPropagation()} />\n              </Dropdown>\n            </div>\n          </div>\n          <div className=\"note-content\">\n            {content}\n          </div>\n          <div className=\"note-tags\">\n            {tags.map(tag => <div className=\"note-tag\" key={tag}>#{tag}</div>)}\n          </div>\n        </>)\n        }\n      </div>\n    )\n  }\n\n}\n\nclass VideoPlayer extends React.Component{\n  constructor(props){\n    super(props)\n    this.player = React.createRef()\n    this.state = {video:null, width:null}\n  }\n\n  componentWillUnmount(){\n    delete this.observer\n  }\n\n  getTime(){\n    //return current time\n  }\n  getLength(){\n\n  }\n  seek(){\n  }\n  play(status){\n    // status=true => play; else pause\n  }\n\n  componentDidMount() {\n    // set up the observable\n    this.observer = new ResizeObserver(() => {\n      let el = this.player.current\n      if(el && (el.offsetWidth != this.state.width)){\n        this.setState({width: this.player.current.offsetWidth})\n      }\n    })\n    this.observer.observe(this.player.current)\n\n    // setState the current width\n    this.setState({\n        width: this.player.current?.offsetWidth\n    })\n  }\n\n  getVideoDOM = () => {\n    let params = new URLSearchParams(window.location.search)\n    let time = 0\n    if (params.get('t') != null) time = parseInt(params.get('t'))\n    const src = this.props.url || \"\"\n    const height = `${this.state.width * (9/16)}px`\n    return <video id='vid' autoPlay controls src={`${src}#t=${time}`} style={{height}} />\n  }\n\n  getLoadingDOM = () => {\n    return <Spin tip=\"Loading...\"/>\n  }\n\n  render(){\n    const { width } = this.state\n    const { url, pinned } = this.props\n    const content = url? this.getVideoDOM() : this.getLoadingDOM()\n    const height = `${this.state.width * (9/16)}px`\n    const rootClass = pinned? \"video-player pinned\" : \"video-player\"\n    return (\n      <div className={rootClass} ref={this.player} >\n       { width && \n        <div className=\"video-container\" style={{height}}>\n          {content}\n        </div>\n      }\n      </div>\n    )\n  }\n}\n\n","import React from \"react\";\nimport {\n  BrowserRouter as Router,\n  useRouteMatch,\n  useParams,\n  Switch,\n  Route,\n  Link\n} from \"react-router-dom\";\n\nimport Home from \"./Home\"\nimport AllCourses from \"./AllCourses\"\nimport AllVideos from \"./AllVideos\"\nimport VideoNotes from \"./VideoNotes\"\nimport \"./App.css\"\n\nexport default function App() {\n  return (\n    <Router>\n      <div className=\"app-shell\">\n\n        <Switch>\n          {/* Shows the homescreen - user moves to notes or video */}\n          <Route exact path=\"/\">\n            <Home />\n          </Route>\n\n          {/* Shows the list of courses the user has taken notes for */}\n          <Route exact path=\"/notes\">\n            <AllCourses />\n          </Route>\n\n          {/* Shows the list of videos in the course 'courseId' */}\n          <Route exact path=\"/notes/:courseId\">\n            <AllVideos />\n          </Route>\n\n          {/* Shows the notes of the specific video selected */}\n          <Route path=\"/notes/:courseId/:videoId\">\n            <CourseNotes />\n          </Route>\n\n          {/* Shows the note taking view for the video */}\n          <Route path=\"/video/:videoId\">\n            <VideoNotes />\n          </Route>\n\n          {/* We can have a user manual sort of thing here? */}\n          <Route path=\"/about\">\n            <About />\n          </Route>\n\n          {/* 404 not found */}\n          <Route path=\"*\">\n            <NoMatch />\n          </Route>\n\n        </Switch>\n      </div>\n    </Router>\n  );\n}\n\n// function Home() {\n//   return (\n//     <>\n//     <div>Welcome to the app</div>\n//     <ul>\n//       <li><Link to=\"/notes\">View your notes</Link></li>\n//       <li><Link to=\"/video/newId\">Take new notes</Link></li>\n//     </ul>\n//     </>\n//   )\n// }\n\nfunction About() {\n  return <h2>About</h2>\n}\n\nfunction NoMatch() {\n  return <h2>404</h2>\n}\n\n// URL = '/notes'\n// function AllCourses() {\n//   let { url } = useRouteMatch()\n//   return (\n//     <>\n//     <div>List of courses</div>\n//     <ul>\n//       <li><Link to={`${url}/c1`}>Course 1</Link></li>\n//       <li><Link to={`${url}/c2`}>Course 2</Link></li>\n//       <li><Link to={`${url}/c3`}>Course 3</Link></li>\n//     </ul>\n//     </>\n//   )\n// }\n\n// URL = '/notes/courseId'\n// function AllVideos(){\n//   let { url } = useRouteMatch()\n//   let { courseId } = useParams()\n//   return (\n//     <>\n//     <div>List of videos for course : {courseId}</div>\n//     <ul>\n//       <li><Link to={`${url}/v1`}>Video 1</Link></li>\n//       <li><Link to={`${url}/v2`}>Video 2</Link></li>\n//       <li><Link to={`${url}/v3`}>Video 3</Link></li>\n//     </ul>\n//     </>\n//   )\n// }\n\n// URL = '/notes/:courseId/:videoId'\nfunction CourseNotes() {\n  let { courseId, videoId } = useParams()\n  return (\n    <>\n    <div>List of notes for the video \"{videoId}\" of course \"{courseId}\"</div>\n    <ul>\n      <li>Note #1</li>\n      <li>Note #2</li>\n      <li>Note #3</li>\n    </ul>\n    </>\n  )\n}\n\n// URL = '/video/:videoId'\n// function VideoNotes(){\n//   return <div>You can take down notes here</div>\n// }","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'antd/dist/antd.css';\n\nimport App from './App';\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}